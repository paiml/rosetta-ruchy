Expr {
    kind: Block(
        [
            Expr {
                kind: Import {
                    path: "std::vec::Vec",
                    items: [
                        Named(
                            "Vec",
                        ),
                    ],
                },
                span: Span {
                    start: 225,
                    end: 228,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "convolution_2d",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                        Param {
                            pattern: Identifier(
                                "kernel",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "image_height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 409,
                                                        end: 414,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "image_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 447,
                                                                                    end: 459,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 462,
                                                                                    end: 463,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 466,
                                                                                                        end: 471,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 472,
                                                                                                        end: 473,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 464,
                                                                            end: 465,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 490,
                                                                                            end: 491,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 488,
                                                                                end: 489,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 444,
                                                                    end: 446,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 426,
                                                            end: 429,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "kernel",
                                                                        ),
                                                                        span: Span {
                                                                            start: 519,
                                                                            end: 525,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 499,
                                                            end: 502,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 559,
                                                                                    end: 572,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 575,
                                                                                    end: 576,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "kernel",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 579,
                                                                                                        end: 585,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 586,
                                                                                                        end: 587,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 577,
                                                                            end: 578,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 604,
                                                                                            end: 605,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 602,
                                                                                end: 603,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 556,
                                                                    end: 558,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 537,
                                                            end: 540,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: If {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Binary {
                                                                                    left: Expr {
                                                                                        kind: Binary {
                                                                                            left: Expr {
                                                                                                kind: Identifier(
                                                                                                    "image_height",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 621,
                                                                                                    end: 633,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            op: Equal,
                                                                                            right: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        0,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 637,
                                                                                                    end: 638,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    op: Or,
                                                                                    right: Expr {
                                                                                        kind: Binary {
                                                                                            left: Expr {
                                                                                                kind: Identifier(
                                                                                                    "image_width",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 642,
                                                                                                    end: 653,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            op: Equal,
                                                                                            right: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        0,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 657,
                                                                                                    end: 658,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                },
                                                                                span: Span {
                                                                                    start: 0,
                                                                                    end: 0,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Or,
                                                                            right: Expr {
                                                                                kind: Binary {
                                                                                    left: Expr {
                                                                                        kind: Identifier(
                                                                                            "kernel_height",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 662,
                                                                                            end: 675,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    op: Equal,
                                                                                    right: Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 679,
                                                                                            end: 680,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                },
                                                                                span: Span {
                                                                                    start: 0,
                                                                                    end: 0,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Or,
                                                                    right: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 684,
                                                                                    end: 696,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 700,
                                                                                    end: 701,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            then_branch: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Return {
                                                                                value: Some(
                                                                                    Expr {
                                                                                        kind: Call {
                                                                                            func: Expr {
                                                                                                kind: QualifiedName {
                                                                                                    module: "Vec",
                                                                                                    name: "new",
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 719,
                                                                                                    end: 722,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            args: [],
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ),
                                                                            },
                                                                            span: Span {
                                                                                start: 712,
                                                                                end: 718,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 702,
                                                                    end: 703,
                                                                },
                                                                attributes: [],
                                                            },
                                                            else_branch: None,
                                                        },
                                                        span: Span {
                                                            start: 618,
                                                            end: 620,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 824,
                                                                                    end: 836,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 839,
                                                                                    end: 852,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 855,
                                                                            end: 856,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 804,
                                                            end: 807,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 881,
                                                                                    end: 892,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 895,
                                                                                    end: 907,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 910,
                                                                            end: 911,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 862,
                                                            end: 865,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: If {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "output_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 925,
                                                                                    end: 938,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: LessEqual,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 942,
                                                                                    end: 943,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Or,
                                                                    right: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "output_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 947,
                                                                                    end: 959,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: LessEqual,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 963,
                                                                                    end: 964,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            then_branch: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Return {
                                                                                value: Some(
                                                                                    Expr {
                                                                                        kind: Call {
                                                                                            func: Expr {
                                                                                                kind: QualifiedName {
                                                                                                    module: "Vec",
                                                                                                    name: "new",
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 982,
                                                                                                    end: 985,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            args: [],
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ),
                                                                            },
                                                                            span: Span {
                                                                                start: 975,
                                                                                end: 981,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 965,
                                                                    end: 966,
                                                                },
                                                                attributes: [],
                                                            },
                                                            else_branch: None,
                                                        },
                                                        span: Span {
                                                            start: 922,
                                                            end: 924,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 1009,
                                                            end: 1012,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "result",
                                                                ),
                                                                span: Span {
                                                                    start: 1013,
                                                                    end: 1019,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 1022,
                                                                            end: 1025,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 1043,
                                                            end: 1046,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 1047,
                                                                    end: 1048,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 1051,
                                                                    end: 1052,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 1064,
                                                                            end: 1065,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "output_height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 1068,
                                                                            end: 1081,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 1092,
                                                                                end: 1095,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 1096,
                                                                                        end: 1099,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 1102,
                                                                                                end: 1105,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 1131,
                                                                                end: 1134,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 1135,
                                                                                        end: 1136,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 1139,
                                                                                        end: 1140,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 1156,
                                                                                                end: 1157,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "output_width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 1160,
                                                                                                end: 1172,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 1187,
                                                                                                    end: 1190,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "sum",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1191,
                                                                                                            end: 1194,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                0,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1197,
                                                                                                            end: 1198,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 1253,
                                                                                                    end: 1256,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "ki",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1257,
                                                                                                            end: 1259,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                0,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1262,
                                                                                                            end: 1263,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: While {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "ki",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1283,
                                                                                                                    end: 1285,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Less,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "kernel_height",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1288,
                                                                                                                    end: 1301,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "var",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 1320,
                                                                                                                        end: 1323,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "kj",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1324,
                                                                                                                                end: 1326,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    0,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1329,
                                                                                                                                end: 1330,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: While {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "kj",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 1354,
                                                                                                                                        end: 1356,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Less,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "kernel_width",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 1359,
                                                                                                                                        end: 1371,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "sum",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 1394,
                                                                                                                                                    end: 1397,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "sum",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 1400,
                                                                                                                                                            end: 1403,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Binary {
                                                                                                                                                            left: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                                            object: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "image",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 1407,
                                                                                                                                                                                    end: 1412,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                            index: Expr {
                                                                                                                                                                                kind: Binary {
                                                                                                                                                                                    left: Expr {
                                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                                            "i",
                                                                                                                                                                                        ),
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 1413,
                                                                                                                                                                                            end: 1414,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                    op: Add,
                                                                                                                                                                                    right: Expr {
                                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                                            "ki",
                                                                                                                                                                                        ),
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 1417,
                                                                                                                                                                                            end: 1419,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                },
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 0,
                                                                                                                                                                                    end: 0,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        },
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 0,
                                                                                                                                                                            end: 0,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Binary {
                                                                                                                                                                            left: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "j",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 1421,
                                                                                                                                                                                    end: 1422,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                            op: Add,
                                                                                                                                                                            right: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "kj",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 1425,
                                                                                                                                                                                    end: 1427,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        },
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 0,
                                                                                                                                                                            end: 0,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            op: Multiply,
                                                                                                                                                            right: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                                            object: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "kernel",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 1431,
                                                                                                                                                                                    end: 1437,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                            index: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "ki",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 1438,
                                                                                                                                                                                    end: 1440,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        },
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 0,
                                                                                                                                                                            end: 0,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "kj",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 1442,
                                                                                                                                                                            end: 1444,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "kj",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 1468,
                                                                                                                                                    end: 1470,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "kj",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 1473,
                                                                                                                                                            end: 1475,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 1478,
                                                                                                                                                            end: 1479,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1372,
                                                                                                                                end: 1373,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 1348,
                                                                                                                        end: 1353,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "ki",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1515,
                                                                                                                                end: 1517,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "ki",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 1520,
                                                                                                                                        end: 1522,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 1525,
                                                                                                                                        end: 1526,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1302,
                                                                                                            end: 1303,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 1277,
                                                                                                    end: 1282,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: If {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "sum",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1612,
                                                                                                                    end: 1615,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Less,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        0,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1618,
                                                                                                                    end: 1619,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    then_branch: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "sum",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1638,
                                                                                                                                end: 1641,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    0,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1644,
                                                                                                                                end: 1645,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1620,
                                                                                                            end: 1621,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    else_branch: None,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 1609,
                                                                                                    end: 1611,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: If {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "sum",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1676,
                                                                                                                    end: 1679,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Greater,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        255,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1682,
                                                                                                                    end: 1685,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    then_branch: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "sum",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1704,
                                                                                                                                end: 1707,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    255,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 1710,
                                                                                                                                end: 1713,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1686,
                                                                                                            end: 1687,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    else_branch: None,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 1673,
                                                                                                    end: 1675,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: MethodCall {
                                                                                                    receiver: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "row",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1754,
                                                                                                            end: 1757,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    method: "push",
                                                                                                    args: [
                                                                                                        Expr {
                                                                                                            kind: Identifier(
                                                                                                                "sum",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 1763,
                                                                                                                end: 1766,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                    ],
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "j",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 1781,
                                                                                                            end: 1782,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1785,
                                                                                                                    end: 1786,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Add,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        1,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 1789,
                                                                                                                    end: 1790,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 1173,
                                                                                        end: 1174,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 1150,
                                                                                end: 1155,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "result",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 1819,
                                                                                        end: 1825,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 1831,
                                                                                            end: 1834,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 1845,
                                                                                        end: 1846,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 1849,
                                                                                                end: 1850,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 1853,
                                                                                                end: 1854,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 1082,
                                                                    end: 1083,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 1058,
                                                            end: 1063,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "result",
                                                        ),
                                                        span: Span {
                                                            start: 1871,
                                                            end: 1877,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 384,
                                                end: 385,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 384,
                                        end: 385,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 384,
                            end: 385,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 303,
                    end: 306,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "sobel_edge_detection",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "sobel_x",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: Macro {
                                                name: "vec",
                                                args: [
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 2067,
                                                                                end: 2068,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 2066,
                                                                        end: 2067,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 2070,
                                                                        end: 2071,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 2073,
                                                                        end: 2074,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 2061,
                                                            end: 2064,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    2,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 2091,
                                                                                end: 2092,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 2090,
                                                                        end: 2091,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 2094,
                                                                        end: 2095,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            2,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 2097,
                                                                        end: 2098,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 2085,
                                                            end: 2088,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 2115,
                                                                                end: 2116,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 2114,
                                                                        end: 2115,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 2118,
                                                                        end: 2119,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 2121,
                                                                        end: 2122,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 2109,
                                                            end: 2112,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 2047,
                                                end: 2050,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "sobel_y",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Macro {
                                                                    name: "vec",
                                                                    args: [
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 2196,
                                                                                                    end: 2197,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 2195,
                                                                                            end: 2196,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        2,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 2200,
                                                                                                    end: 2201,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 2199,
                                                                                            end: 2200,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 2204,
                                                                                                    end: 2205,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 2203,
                                                                                            end: 2204,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 2190,
                                                                                end: 2193,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 2221,
                                                                                            end: 2222,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 2224,
                                                                                            end: 2225,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 2227,
                                                                                            end: 2228,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 2216,
                                                                                end: 2219,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 2244,
                                                                                            end: 2245,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                2,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 2247,
                                                                                            end: 2248,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 2250,
                                                                                            end: 2251,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 2239,
                                                                                end: 2242,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 2176,
                                                                    end: 2179,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 2162,
                                                            end: 2165,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "grad_x",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "convolution_2d",
                                                                        ),
                                                                        span: Span {
                                                                            start: 2282,
                                                                            end: 2296,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "image",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 2297,
                                                                                        end: 2302,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "clone",
                                                                                args: [],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "sobel_x",
                                                                            ),
                                                                            span: Span {
                                                                                start: 2312,
                                                                                end: 2319,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 2269,
                                                            end: 2272,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "grad_y",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "convolution_2d",
                                                                        ),
                                                                        span: Span {
                                                                            start: 2339,
                                                                            end: 2353,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "image",
                                                                            ),
                                                                            span: Span {
                                                                                start: 2354,
                                                                                end: 2359,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "sobel_y",
                                                                            ),
                                                                            span: Span {
                                                                                start: 2361,
                                                                                end: 2368,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 2326,
                                                            end: 2329,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "grad_x",
                                                                        ),
                                                                        span: Span {
                                                                            start: 2445,
                                                                            end: 2451,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 2432,
                                                            end: 2435,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 2478,
                                                                                    end: 2484,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 2487,
                                                                                    end: 2488,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "grad_x",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 2491,
                                                                                                        end: 2497,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 2498,
                                                                                                        end: 2499,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 2489,
                                                                            end: 2490,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 2516,
                                                                                            end: 2517,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 2514,
                                                                                end: 2515,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 2475,
                                                                    end: 2477,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 2463,
                                                            end: 2466,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 2530,
                                                            end: 2533,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "magnitude",
                                                                ),
                                                                span: Span {
                                                                    start: 2534,
                                                                    end: 2543,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 2546,
                                                                            end: 2549,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 2567,
                                                            end: 2570,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 2571,
                                                                    end: 2572,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 2575,
                                                                    end: 2576,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 2588,
                                                                            end: 2589,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 2592,
                                                                            end: 2598,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 2609,
                                                                                end: 2612,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 2613,
                                                                                        end: 2616,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 2619,
                                                                                                end: 2622,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 2648,
                                                                                end: 2651,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 2652,
                                                                                        end: 2653,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 2656,
                                                                                        end: 2657,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 2673,
                                                                                                end: 2674,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 2677,
                                                                                                end: 2682,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "gx",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: IndexAccess {
                                                                                                            object: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "grad_x",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 2706,
                                                                                                                            end: 2712,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "i",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 2713,
                                                                                                                            end: 2714,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            index: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 2716,
                                                                                                                    end: 2717,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "gy",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: IndexAccess {
                                                                                                                                object: Expr {
                                                                                                                                    kind: IndexAccess {
                                                                                                                                        object: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "grad_y",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 2741,
                                                                                                                                                end: 2747,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        index: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "i",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 2748,
                                                                                                                                                end: 2749,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                index: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 2751,
                                                                                                                                        end: 2752,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 2732,
                                                                                                                        end: 2735,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "mag",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Call {
                                                                                                                                func: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "integer_sqrt",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 2777,
                                                                                                                                        end: 2789,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                args: [
                                                                                                                                    Expr {
                                                                                                                                        kind: Binary {
                                                                                                                                            left: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gx",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 2791,
                                                                                                                                                            end: 2793,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Multiply,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gx",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 2796,
                                                                                                                                                            end: 2798,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            op: Add,
                                                                                                                                            right: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gy",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 2803,
                                                                                                                                                            end: 2805,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Multiply,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gy",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 2808,
                                                                                                                                                            end: 2810,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 2767,
                                                                                                                        end: 2770,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "clamped_mag",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: If {
                                                                                                                                condition: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "mag",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 2896,
                                                                                                                                                end: 2899,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Greater,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    255,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 2902,
                                                                                                                                                end: 2905,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                then_branch: Expr {
                                                                                                                                    kind: Block(
                                                                                                                                        [
                                                                                                                                            Expr {
                                                                                                                                                kind: Literal(
                                                                                                                                                    Integer(
                                                                                                                                                        255,
                                                                                                                                                    ),
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 2908,
                                                                                                                                                    end: 2911,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 2906,
                                                                                                                                        end: 2907,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                else_branch: Some(
                                                                                                                                    Expr {
                                                                                                                                        kind: Block(
                                                                                                                                            [
                                                                                                                                                Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "mag",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 2921,
                                                                                                                                                        end: 2924,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            ],
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 2919,
                                                                                                                                            end: 2920,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ),
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 2893,
                                                                                                                                end: 2895,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 2875,
                                                                                                                        end: 2878,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 2940,
                                                                                                                                end: 2943,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "clamped_mag",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 2949,
                                                                                                                                    end: 2960,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 2975,
                                                                                                                                end: 2976,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 2979,
                                                                                                                                        end: 2980,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 2983,
                                                                                                                                        end: 2984,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 2683,
                                                                                                            end: 2684,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 2683,
                                                                                                    end: 2684,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 2683,
                                                                                        end: 2684,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 2667,
                                                                                end: 2672,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "magnitude",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 3013,
                                                                                        end: 3022,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3028,
                                                                                            end: 3031,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 3042,
                                                                                        end: 3043,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 3046,
                                                                                                end: 3047,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 3050,
                                                                                                end: 3051,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 2599,
                                                                    end: 2600,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 2582,
                                                            end: 2587,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "magnitude",
                                                        ),
                                                        span: Span {
                                                            start: 3068,
                                                            end: 3077,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 2005,
                                                end: 2006,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 2005,
                                        end: 2006,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 2005,
                            end: 2006,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 1941,
                    end: 1944,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "prewitt_edge_detection",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "prewitt_x",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: Macro {
                                                name: "vec",
                                                args: [
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 3239,
                                                                                end: 3240,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 3238,
                                                                        end: 3239,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 3242,
                                                                        end: 3243,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 3245,
                                                                        end: 3246,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 3233,
                                                            end: 3236,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 3263,
                                                                                end: 3264,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 3262,
                                                                        end: 3263,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 3266,
                                                                        end: 3267,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 3269,
                                                                        end: 3270,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 3257,
                                                            end: 3260,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 3287,
                                                                                end: 3288,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 3286,
                                                                        end: 3287,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 3290,
                                                                        end: 3291,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 3293,
                                                                        end: 3294,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 3281,
                                                            end: 3284,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 3219,
                                                end: 3222,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "prewitt_y",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Macro {
                                                                    name: "vec",
                                                                    args: [
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 3372,
                                                                                                    end: 3373,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 3371,
                                                                                            end: 3372,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 3376,
                                                                                                    end: 3377,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 3375,
                                                                                            end: 3376,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 3380,
                                                                                                    end: 3381,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 3379,
                                                                                            end: 3380,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 3366,
                                                                                end: 3369,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3397,
                                                                                            end: 3398,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3400,
                                                                                            end: 3401,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3403,
                                                                                            end: 3404,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 3392,
                                                                                end: 3395,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3420,
                                                                                            end: 3421,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3423,
                                                                                            end: 3424,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3426,
                                                                                            end: 3427,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 3415,
                                                                                end: 3418,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 3352,
                                                                    end: 3355,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 3336,
                                                            end: 3339,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "grad_x",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "convolution_2d",
                                                                        ),
                                                                        span: Span {
                                                                            start: 3458,
                                                                            end: 3472,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "image",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 3473,
                                                                                        end: 3478,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "clone",
                                                                                args: [],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "prewitt_x",
                                                                            ),
                                                                            span: Span {
                                                                                start: 3488,
                                                                                end: 3497,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 3445,
                                                            end: 3448,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "grad_y",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "convolution_2d",
                                                                        ),
                                                                        span: Span {
                                                                            start: 3517,
                                                                            end: 3531,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "image",
                                                                            ),
                                                                            span: Span {
                                                                                start: 3532,
                                                                                end: 3537,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "prewitt_y",
                                                                            ),
                                                                            span: Span {
                                                                                start: 3539,
                                                                                end: 3548,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 3504,
                                                            end: 3507,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "grad_x",
                                                                        ),
                                                                        span: Span {
                                                                            start: 3600,
                                                                            end: 3606,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 3587,
                                                            end: 3590,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 3633,
                                                                                    end: 3639,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 3642,
                                                                                    end: 3643,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "grad_x",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 3646,
                                                                                                        end: 3652,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 3653,
                                                                                                        end: 3654,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 3644,
                                                                            end: 3645,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 3671,
                                                                                            end: 3672,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 3669,
                                                                                end: 3670,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 3630,
                                                                    end: 3632,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 3618,
                                                            end: 3621,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 3685,
                                                            end: 3688,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "magnitude",
                                                                ),
                                                                span: Span {
                                                                    start: 3689,
                                                                    end: 3698,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 3701,
                                                                            end: 3704,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 3722,
                                                            end: 3725,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 3726,
                                                                    end: 3727,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 3730,
                                                                    end: 3731,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 3743,
                                                                            end: 3744,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 3747,
                                                                            end: 3753,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 3764,
                                                                                end: 3767,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 3768,
                                                                                        end: 3771,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 3774,
                                                                                                end: 3777,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 3803,
                                                                                end: 3806,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 3807,
                                                                                        end: 3808,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 3811,
                                                                                        end: 3812,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 3828,
                                                                                                end: 3829,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 3832,
                                                                                                end: 3837,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "gx",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: IndexAccess {
                                                                                                            object: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "grad_x",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 3861,
                                                                                                                            end: 3867,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "i",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 3868,
                                                                                                                            end: 3869,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            index: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 3871,
                                                                                                                    end: 3872,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "gy",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: IndexAccess {
                                                                                                                                object: Expr {
                                                                                                                                    kind: IndexAccess {
                                                                                                                                        object: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "grad_y",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 3896,
                                                                                                                                                end: 3902,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        index: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "i",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 3903,
                                                                                                                                                end: 3904,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                index: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 3906,
                                                                                                                                        end: 3907,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 3887,
                                                                                                                        end: 3890,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "mag",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Call {
                                                                                                                                func: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "integer_sqrt",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 3932,
                                                                                                                                        end: 3944,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                args: [
                                                                                                                                    Expr {
                                                                                                                                        kind: Binary {
                                                                                                                                            left: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gx",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 3946,
                                                                                                                                                            end: 3948,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Multiply,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gx",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 3951,
                                                                                                                                                            end: 3953,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            op: Add,
                                                                                                                                            right: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gy",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 3958,
                                                                                                                                                            end: 3960,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Multiply,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "gy",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 3963,
                                                                                                                                                            end: 3965,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 3922,
                                                                                                                        end: 3925,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "clamped_mag",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: If {
                                                                                                                                condition: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "mag",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 4015,
                                                                                                                                                end: 4018,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Greater,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    255,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 4021,
                                                                                                                                                end: 4024,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                then_branch: Expr {
                                                                                                                                    kind: Block(
                                                                                                                                        [
                                                                                                                                            Expr {
                                                                                                                                                kind: Literal(
                                                                                                                                                    Integer(
                                                                                                                                                        255,
                                                                                                                                                    ),
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 4027,
                                                                                                                                                    end: 4030,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 4025,
                                                                                                                                        end: 4026,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                else_branch: Some(
                                                                                                                                    Expr {
                                                                                                                                        kind: Block(
                                                                                                                                            [
                                                                                                                                                Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "mag",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 4040,
                                                                                                                                                        end: 4043,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            ],
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 4038,
                                                                                                                                            end: 4039,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ),
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 4012,
                                                                                                                                end: 4014,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 3994,
                                                                                                                        end: 3997,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 4059,
                                                                                                                                end: 4062,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "clamped_mag",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 4068,
                                                                                                                                    end: 4079,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 4094,
                                                                                                                                end: 4095,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 4098,
                                                                                                                                        end: 4099,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 4102,
                                                                                                                                        end: 4103,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 3838,
                                                                                                            end: 3839,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 3838,
                                                                                                    end: 3839,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 3838,
                                                                                        end: 3839,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 3822,
                                                                                end: 3827,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "magnitude",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 4132,
                                                                                        end: 4141,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 4147,
                                                                                            end: 4150,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 4161,
                                                                                        end: 4162,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 4165,
                                                                                                end: 4166,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 4169,
                                                                                                end: 4170,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 3754,
                                                                    end: 3755,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 3737,
                                                            end: 3742,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "magnitude",
                                                        ),
                                                        span: Span {
                                                            start: 4187,
                                                            end: 4196,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 3173,
                                                end: 3174,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 3173,
                                        end: 3174,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 3173,
                            end: 3174,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 3107,
                    end: 3110,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "integer_sqrt",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "value",
                            ),
                            ty: Type {
                                kind: Named(
                                    "i32",
                                ),
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Named(
                                "i32",
                            ),
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: If {
                                        condition: Expr {
                                            kind: Binary {
                                                left: Expr {
                                                    kind: Identifier(
                                                        "value",
                                                    ),
                                                    span: Span {
                                                        start: 4288,
                                                        end: 4293,
                                                    },
                                                    attributes: [],
                                                },
                                                op: LessEqual,
                                                right: Expr {
                                                    kind: Literal(
                                                        Integer(
                                                            0,
                                                        ),
                                                    ),
                                                    span: Span {
                                                        start: 4297,
                                                        end: 4298,
                                                    },
                                                    attributes: [],
                                                },
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        then_branch: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Return {
                                                            value: Some(
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 4316,
                                                                        end: 4317,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ),
                                                        },
                                                        span: Span {
                                                            start: 4309,
                                                            end: 4315,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 4299,
                                                end: 4300,
                                            },
                                            attributes: [],
                                        },
                                        else_branch: None,
                                    },
                                    span: Span {
                                        start: 4285,
                                        end: 4287,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: If {
                                        condition: Expr {
                                            kind: Binary {
                                                left: Expr {
                                                    kind: Identifier(
                                                        "value",
                                                    ),
                                                    span: Span {
                                                        start: 4332,
                                                        end: 4337,
                                                    },
                                                    attributes: [],
                                                },
                                                op: Equal,
                                                right: Expr {
                                                    kind: Literal(
                                                        Integer(
                                                            1,
                                                        ),
                                                    ),
                                                    span: Span {
                                                        start: 4341,
                                                        end: 4342,
                                                    },
                                                    attributes: [],
                                                },
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        then_branch: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Return {
                                                            value: Some(
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 4360,
                                                                        end: 4361,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ),
                                                        },
                                                        span: Span {
                                                            start: 4353,
                                                            end: 4359,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 4343,
                                                end: 4344,
                                            },
                                            attributes: [],
                                        },
                                        else_branch: None,
                                    },
                                    span: Span {
                                        start: 4329,
                                        end: 4331,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Identifier(
                                        "var",
                                    ),
                                    span: Span {
                                        start: 4378,
                                        end: 4381,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Assign {
                                        target: Expr {
                                            kind: Identifier(
                                                "left",
                                            ),
                                            span: Span {
                                                start: 4382,
                                                end: 4386,
                                            },
                                            attributes: [],
                                        },
                                        value: Expr {
                                            kind: Literal(
                                                Integer(
                                                    1,
                                                ),
                                            ),
                                            span: Span {
                                                start: 4389,
                                                end: 4390,
                                            },
                                            attributes: [],
                                        },
                                    },
                                    span: Span {
                                        start: 0,
                                        end: 0,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Identifier(
                                        "var",
                                    ),
                                    span: Span {
                                        start: 4396,
                                        end: 4399,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Assign {
                                        target: Expr {
                                            kind: Identifier(
                                                "right",
                                            ),
                                            span: Span {
                                                start: 4400,
                                                end: 4405,
                                            },
                                            attributes: [],
                                        },
                                        value: Expr {
                                            kind: Binary {
                                                left: Expr {
                                                    kind: Binary {
                                                        left: Expr {
                                                            kind: Identifier(
                                                                "value",
                                                            ),
                                                            span: Span {
                                                                start: 4408,
                                                                end: 4413,
                                                            },
                                                            attributes: [],
                                                        },
                                                        op: Divide,
                                                        right: Expr {
                                                            kind: Literal(
                                                                Integer(
                                                                    2,
                                                                ),
                                                            ),
                                                            span: Span {
                                                                start: 4416,
                                                                end: 4417,
                                                            },
                                                            attributes: [],
                                                        },
                                                    },
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                    attributes: [],
                                                },
                                                op: Add,
                                                right: Expr {
                                                    kind: Literal(
                                                        Integer(
                                                            1,
                                                        ),
                                                    ),
                                                    span: Span {
                                                        start: 4420,
                                                        end: 4421,
                                                    },
                                                    attributes: [],
                                                },
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                    },
                                    span: Span {
                                        start: 0,
                                        end: 0,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Identifier(
                                        "var",
                                    ),
                                    span: Span {
                                        start: 4427,
                                        end: 4430,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Assign {
                                        target: Expr {
                                            kind: Identifier(
                                                "result",
                                            ),
                                            span: Span {
                                                start: 4431,
                                                end: 4437,
                                            },
                                            attributes: [],
                                        },
                                        value: Expr {
                                            kind: Literal(
                                                Integer(
                                                    1,
                                                ),
                                            ),
                                            span: Span {
                                                start: 4440,
                                                end: 4441,
                                            },
                                            attributes: [],
                                        },
                                    },
                                    span: Span {
                                        start: 0,
                                        end: 0,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: While {
                                        condition: Expr {
                                            kind: Binary {
                                                left: Expr {
                                                    kind: Identifier(
                                                        "left",
                                                    ),
                                                    span: Span {
                                                        start: 4458,
                                                        end: 4462,
                                                    },
                                                    attributes: [],
                                                },
                                                op: LessEqual,
                                                right: Expr {
                                                    kind: Identifier(
                                                        "right",
                                                    ),
                                                    span: Span {
                                                        start: 4466,
                                                        end: 4471,
                                                    },
                                                    attributes: [],
                                                },
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "mid",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "left",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 4493,
                                                                                    end: 4497,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Add,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "right",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 4500,
                                                                                    end: 4505,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Divide,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                2,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 4509,
                                                                            end: 4510,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Let {
                                                                                name: "square",
                                                                                type_annotation: None,
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "mid",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 4533,
                                                                                                end: 4536,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Multiply,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "mid",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 4539,
                                                                                                end: 4542,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Literal(
                                                                                        Unit,
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                is_mutable: true,
                                                                            },
                                                                            span: Span {
                                                                                start: 4520,
                                                                                end: 4523,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: If {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "square",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 4564,
                                                                                                end: 4570,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Equal,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "value",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 4574,
                                                                                                end: 4579,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                then_branch: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Return {
                                                                                                    value: Some(
                                                                                                        Expr {
                                                                                                            kind: Identifier(
                                                                                                                "mid",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 4601,
                                                                                                                end: 4604,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                    ),
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 4594,
                                                                                                    end: 4600,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 4580,
                                                                                        end: 4581,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                else_branch: Some(
                                                                                    Expr {
                                                                                        kind: If {
                                                                                            condition: Expr {
                                                                                                kind: Binary {
                                                                                                    left: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "square",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 4624,
                                                                                                            end: 4630,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    op: Less,
                                                                                                    right: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "value",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 4633,
                                                                                                            end: 4638,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            then_branch: Expr {
                                                                                                kind: Block(
                                                                                                    [
                                                                                                        Expr {
                                                                                                            kind: Assign {
                                                                                                                target: Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "result",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 4653,
                                                                                                                        end: 4659,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                value: Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "mid",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 4662,
                                                                                                                        end: 4665,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            },
                                                                                                            span: Span {
                                                                                                                start: 0,
                                                                                                                end: 0,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                        Expr {
                                                                                                            kind: Assign {
                                                                                                                target: Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "left",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 4679,
                                                                                                                        end: 4683,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                value: Expr {
                                                                                                                    kind: Binary {
                                                                                                                        left: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "mid",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 4686,
                                                                                                                                end: 4689,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        op: Add,
                                                                                                                        right: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    1,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 4692,
                                                                                                                                end: 4693,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            },
                                                                                                            span: Span {
                                                                                                                start: 0,
                                                                                                                end: 0,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                    ],
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 4639,
                                                                                                    end: 4640,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            else_branch: Some(
                                                                                                Expr {
                                                                                                    kind: Block(
                                                                                                        [
                                                                                                            Expr {
                                                                                                                kind: Assign {
                                                                                                                    target: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "right",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 4724,
                                                                                                                            end: 4729,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    value: Expr {
                                                                                                                        kind: Binary {
                                                                                                                            left: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "mid",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 4732,
                                                                                                                                    end: 4735,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                            op: Subtract,
                                                                                                                            right: Expr {
                                                                                                                                kind: Literal(
                                                                                                                                    Integer(
                                                                                                                                        1,
                                                                                                                                    ),
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 4738,
                                                                                                                                    end: 4739,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        },
                                                                                                                        span: Span {
                                                                                                                            start: 0,
                                                                                                                            end: 0,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        ],
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 4710,
                                                                                                        end: 4711,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            ),
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 4621,
                                                                                            end: 4623,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ),
                                                                            },
                                                                            span: Span {
                                                                                start: 4561,
                                                                                end: 4563,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 4472,
                                                                    end: 4473,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: false,
                                                        },
                                                        span: Span {
                                                            start: 4472,
                                                            end: 4473,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 4472,
                                                end: 4473,
                                            },
                                            attributes: [],
                                        },
                                    },
                                    span: Span {
                                        start: 4452,
                                        end: 4457,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Identifier(
                                        "result",
                                    ),
                                    span: Span {
                                        start: 4766,
                                        end: 4772,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 4279,
                            end: 4280,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 4243,
                    end: 4246,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "gaussian_blur",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                        Param {
                            pattern: Identifier(
                                "sigma",
                            ),
                            ty: Type {
                                kind: Named(
                                    "i32",
                                ),
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "kernel",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: If {
                                                condition: Expr {
                                                    kind: Binary {
                                                        left: Expr {
                                                            kind: Identifier(
                                                                "sigma",
                                                            ),
                                                            span: Span {
                                                                start: 5014,
                                                                end: 5019,
                                                            },
                                                            attributes: [],
                                                        },
                                                        op: Equal,
                                                        right: Expr {
                                                            kind: Literal(
                                                                Integer(
                                                                    1,
                                                                ),
                                                            ),
                                                            span: Span {
                                                                start: 5023,
                                                                end: 5024,
                                                            },
                                                            attributes: [],
                                                        },
                                                    },
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                    attributes: [],
                                                },
                                                then_branch: Expr {
                                                    kind: Block(
                                                        [
                                                            Expr {
                                                                kind: Macro {
                                                                    name: "vec",
                                                                    args: [
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5058,
                                                                                            end: 5059,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                2,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5061,
                                                                                            end: 5062,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5064,
                                                                                            end: 5065,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 5053,
                                                                                end: 5056,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                2,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5085,
                                                                                            end: 5086,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                4,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5088,
                                                                                            end: 5089,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                2,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5091,
                                                                                            end: 5092,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 5080,
                                                                                end: 5083,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5112,
                                                                                            end: 5113,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                2,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5115,
                                                                                            end: 5116,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5118,
                                                                                            end: 5119,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 5107,
                                                                                end: 5110,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 5035,
                                                                    end: 5038,
                                                                },
                                                                attributes: [],
                                                            },
                                                        ],
                                                    ),
                                                    span: Span {
                                                        start: 5025,
                                                        end: 5026,
                                                    },
                                                    attributes: [],
                                                },
                                                else_branch: Some(
                                                    Expr {
                                                        kind: Block(
                                                            [
                                                                Expr {
                                                                    kind: Macro {
                                                                        name: "vec",
                                                                        args: [
                                                                            Expr {
                                                                                kind: Macro {
                                                                                    name: "vec",
                                                                                    args: [
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5240,
                                                                                                end: 5241,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5243,
                                                                                                end: 5244,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5246,
                                                                                                end: 5247,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    ],
                                                                                },
                                                                                span: Span {
                                                                                    start: 5235,
                                                                                    end: 5238,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            Expr {
                                                                                kind: Macro {
                                                                                    name: "vec",
                                                                                    args: [
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5267,
                                                                                                end: 5268,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5270,
                                                                                                end: 5271,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5273,
                                                                                                end: 5274,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    ],
                                                                                },
                                                                                span: Span {
                                                                                    start: 5262,
                                                                                    end: 5265,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            Expr {
                                                                                kind: Macro {
                                                                                    name: "vec",
                                                                                    args: [
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5294,
                                                                                                end: 5295,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5297,
                                                                                                end: 5298,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5300,
                                                                                                end: 5301,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    ],
                                                                                },
                                                                                span: Span {
                                                                                    start: 5289,
                                                                                    end: 5292,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        ],
                                                                    },
                                                                    span: Span {
                                                                        start: 5217,
                                                                        end: 5220,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        ),
                                                        span: Span {
                                                            start: 5142,
                                                            end: 5143,
                                                        },
                                                        attributes: [],
                                                    },
                                                ),
                                            },
                                            span: Span {
                                                start: 5011,
                                                end: 5013,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "convolved",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "convolution_2d",
                                                                        ),
                                                                        span: Span {
                                                                            start: 5345,
                                                                            end: 5359,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "image",
                                                                            ),
                                                                            span: Span {
                                                                                start: 5360,
                                                                                end: 5365,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "kernel",
                                                                            ),
                                                                            span: Span {
                                                                                start: 5367,
                                                                                end: 5373,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 5329,
                                                            end: 5332,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel_sum",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "sigma",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 5436,
                                                                                    end: 5441,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        1,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 5445,
                                                                                    end: 5446,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            16,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 5449,
                                                                                        end: 5451,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 5447,
                                                                            end: 5448,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                9,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5461,
                                                                                            end: 5462,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 5459,
                                                                                end: 5460,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 5433,
                                                                    end: 5435,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 5416,
                                                            end: 5419,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "convolved",
                                                                        ),
                                                                        span: Span {
                                                                            start: 5488,
                                                                            end: 5497,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 5475,
                                                            end: 5478,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 5524,
                                                                                    end: 5530,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 5533,
                                                                                    end: 5534,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "convolved",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 5537,
                                                                                                        end: 5546,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 5547,
                                                                                                        end: 5548,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 5535,
                                                                            end: 5536,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5565,
                                                                                            end: 5566,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 5563,
                                                                                end: 5564,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 5521,
                                                                    end: 5523,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 5509,
                                                            end: 5512,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 5579,
                                                            end: 5582,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "normalized",
                                                                ),
                                                                span: Span {
                                                                    start: 5583,
                                                                    end: 5593,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 5596,
                                                                            end: 5599,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 5617,
                                                            end: 5620,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 5621,
                                                                    end: 5622,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 5625,
                                                                    end: 5626,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 5638,
                                                                            end: 5639,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 5642,
                                                                            end: 5648,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 5659,
                                                                                end: 5662,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 5663,
                                                                                        end: 5666,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 5669,
                                                                                                end: 5672,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 5698,
                                                                                end: 5701,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 5702,
                                                                                        end: 5703,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 5706,
                                                                                        end: 5707,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5723,
                                                                                                end: 5724,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5727,
                                                                                                end: 5732,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "normalized_value",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: IndexAccess {
                                                                                                                            object: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "convolved",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 5770,
                                                                                                                                    end: 5779,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                            index: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "i",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 5780,
                                                                                                                                    end: 5781,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        },
                                                                                                                        span: Span {
                                                                                                                            start: 0,
                                                                                                                            end: 0,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "j",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 5783,
                                                                                                                            end: 5784,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Divide,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "kernel_sum",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 5788,
                                                                                                                    end: 5798,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 5812,
                                                                                                                                end: 5815,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "normalized_value",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 5821,
                                                                                                                                    end: 5837,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 5852,
                                                                                                                                end: 5853,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 5856,
                                                                                                                                        end: 5857,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 5860,
                                                                                                                                        end: 5861,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 5733,
                                                                                                            end: 5734,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 5733,
                                                                                                    end: 5734,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 5733,
                                                                                        end: 5734,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 5717,
                                                                                end: 5722,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "normalized",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 5890,
                                                                                        end: 5900,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 5906,
                                                                                            end: 5909,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 5920,
                                                                                        end: 5921,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5924,
                                                                                                end: 5925,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 5928,
                                                                                                end: 5929,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 5649,
                                                                    end: 5650,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 5632,
                                                            end: 5637,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "normalized",
                                                        ),
                                                        span: Span {
                                                            start: 5946,
                                                            end: 5956,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 4896,
                                                end: 4897,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 4896,
                                        end: 4897,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 4896,
                            end: 4897,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 4827,
                    end: 4830,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "sharpen_image",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "sharpen_kernel",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: Macro {
                                                name: "vec",
                                                args: [
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 6130,
                                                                        end: 6131,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 6134,
                                                                                end: 6135,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 6133,
                                                                        end: 6134,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 6137,
                                                                        end: 6138,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 6125,
                                                            end: 6128,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 6155,
                                                                                end: 6156,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 6154,
                                                                        end: 6155,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            5,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 6158,
                                                                        end: 6159,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 6162,
                                                                                end: 6163,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 6161,
                                                                        end: 6162,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 6149,
                                                            end: 6152,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 6179,
                                                                        end: 6180,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Unary {
                                                                        op: Negate,
                                                                        operand: Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 6183,
                                                                                end: 6184,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    },
                                                                    span: Span {
                                                                        start: 6182,
                                                                        end: 6183,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 6186,
                                                                        end: 6187,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 6174,
                                                            end: 6177,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 6111,
                                                end: 6114,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Call {
                                                func: Expr {
                                                    kind: Identifier(
                                                        "convolution_2d",
                                                    ),
                                                    span: Span {
                                                        start: 6205,
                                                        end: 6219,
                                                    },
                                                    attributes: [],
                                                },
                                                args: [
                                                    Expr {
                                                        kind: Identifier(
                                                            "image",
                                                        ),
                                                        span: Span {
                                                            start: 6220,
                                                            end: 6225,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "sharpen_kernel",
                                                        ),
                                                        span: Span {
                                                            start: 6227,
                                                            end: 6241,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 6059,
                                        end: 6060,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 6059,
                            end: 6060,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 6002,
                    end: 6005,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "calculate_histogram",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                        Param {
                            pattern: Identifier(
                                "bins",
                            ),
                            ty: Type {
                                kind: Named(
                                    "i32",
                                ),
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Named(
                                            "i32",
                                        ),
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Identifier(
                                        "var",
                                    ),
                                    span: Span {
                                        start: 6350,
                                        end: 6353,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Assign {
                                        target: Expr {
                                            kind: Identifier(
                                                "histogram",
                                            ),
                                            span: Span {
                                                start: 6354,
                                                end: 6363,
                                            },
                                            attributes: [],
                                        },
                                        value: Expr {
                                            kind: Call {
                                                func: Expr {
                                                    kind: QualifiedName {
                                                        module: "Vec",
                                                        name: "new",
                                                    },
                                                    span: Span {
                                                        start: 6366,
                                                        end: 6369,
                                                    },
                                                    attributes: [],
                                                },
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                    },
                                    span: Span {
                                        start: 0,
                                        end: 0,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Identifier(
                                        "var",
                                    ),
                                    span: Span {
                                        start: 6420,
                                        end: 6423,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Assign {
                                        target: Expr {
                                            kind: Identifier(
                                                "i",
                                            ),
                                            span: Span {
                                                start: 6424,
                                                end: 6425,
                                            },
                                            attributes: [],
                                        },
                                        value: Expr {
                                            kind: Literal(
                                                Integer(
                                                    0,
                                                ),
                                            ),
                                            span: Span {
                                                start: 6428,
                                                end: 6429,
                                            },
                                            attributes: [],
                                        },
                                    },
                                    span: Span {
                                        start: 0,
                                        end: 0,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: While {
                                        condition: Expr {
                                            kind: Binary {
                                                left: Expr {
                                                    kind: Identifier(
                                                        "i",
                                                    ),
                                                    span: Span {
                                                        start: 6441,
                                                        end: 6442,
                                                    },
                                                    attributes: [],
                                                },
                                                op: Less,
                                                right: Expr {
                                                    kind: Identifier(
                                                        "bins",
                                                    ),
                                                    span: Span {
                                                        start: 6445,
                                                        end: 6449,
                                                    },
                                                    attributes: [],
                                                },
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: MethodCall {
                                                            receiver: Expr {
                                                                kind: Identifier(
                                                                    "histogram",
                                                                ),
                                                                span: Span {
                                                                    start: 6460,
                                                                    end: 6469,
                                                                },
                                                                attributes: [],
                                                            },
                                                            method: "push",
                                                            args: [
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            0,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 6475,
                                                                        end: 6476,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 6487,
                                                                    end: 6488,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 6491,
                                                                            end: 6492,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 6495,
                                                                            end: 6496,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 6450,
                                                end: 6451,
                                            },
                                            attributes: [],
                                        },
                                    },
                                    span: Span {
                                        start: 6435,
                                        end: 6440,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Let {
                                        name: "height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 6557,
                                                        end: 6562,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 6589,
                                                                                    end: 6595,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 6598,
                                                                                    end: 6599,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 6602,
                                                                                                        end: 6607,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 6608,
                                                                                                        end: 6609,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 6600,
                                                                            end: 6601,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 6626,
                                                                                            end: 6627,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 6624,
                                                                                end: 6625,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 6586,
                                                                    end: 6588,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 6574,
                                                            end: 6577,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 6640,
                                                                    end: 6641,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 6644,
                                                                    end: 6645,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 6657,
                                                                            end: 6658,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 6661,
                                                                            end: 6667,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 6678,
                                                                                end: 6681,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 6682,
                                                                                        end: 6683,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 6686,
                                                                                        end: 6687,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 6703,
                                                                                                end: 6704,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 6707,
                                                                                                end: 6712,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "pixel_value",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: IndexAccess {
                                                                                                            object: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "image",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 6745,
                                                                                                                            end: 6750,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "i",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 6751,
                                                                                                                            end: 6752,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            index: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 6754,
                                                                                                                    end: 6755,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: If {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "pixel_value",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 6846,
                                                                                                                                                end: 6857,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: GreaterEqual,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    0,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 6861,
                                                                                                                                                end: 6862,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: And,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "pixel_value",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 6866,
                                                                                                                                                end: 6877,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Less,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "bins",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 6880,
                                                                                                                                                end: 6884,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        then_branch: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: IndexAccess {
                                                                                                                                                    object: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "histogram",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 6903,
                                                                                                                                                            end: 6912,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    index: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "pixel_value",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 6913,
                                                                                                                                                            end: 6924,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                            object: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "histogram",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 6928,
                                                                                                                                                                    end: 6937,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            index: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "pixel_value",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 6938,
                                                                                                                                                                    end: 6949,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 6953,
                                                                                                                                                            end: 6954,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 6885,
                                                                                                                                end: 6886,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        else_branch: None,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 6843,
                                                                                                                        end: 6845,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 6995,
                                                                                                                                end: 6996,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 6999,
                                                                                                                                        end: 7000,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 7003,
                                                                                                                                        end: 7004,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 6713,
                                                                                                            end: 6714,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 6713,
                                                                                                    end: 6714,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 6713,
                                                                                        end: 6714,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 6697,
                                                                                end: 6702,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 7024,
                                                                                        end: 7025,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 7028,
                                                                                                end: 7029,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 7032,
                                                                                                end: 7033,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 6668,
                                                                    end: 6669,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 6651,
                                                            end: 6656,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "histogram",
                                                        ),
                                                        span: Span {
                                                            start: 7050,
                                                            end: 7059,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 6344,
                                                end: 6345,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 6344,
                                        end: 6345,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 6344,
                            end: 6345,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 6275,
                    end: 6278,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "threshold_image",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                        Param {
                            pattern: Identifier(
                                "threshold",
                            ),
                            ty: Type {
                                kind: Named(
                                    "i32",
                                ),
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 7180,
                                                        end: 7185,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 7212,
                                                                                    end: 7218,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 7221,
                                                                                    end: 7222,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 7225,
                                                                                                        end: 7230,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 7231,
                                                                                                        end: 7232,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 7223,
                                                                            end: 7224,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 7249,
                                                                                            end: 7250,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 7247,
                                                                                end: 7248,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 7209,
                                                                    end: 7211,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 7197,
                                                            end: 7200,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 7263,
                                                            end: 7266,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "binary_image",
                                                                ),
                                                                span: Span {
                                                                    start: 7267,
                                                                    end: 7279,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 7282,
                                                                            end: 7285,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 7303,
                                                            end: 7306,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 7307,
                                                                    end: 7308,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 7311,
                                                                    end: 7312,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 7324,
                                                                            end: 7325,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 7328,
                                                                            end: 7334,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 7345,
                                                                                end: 7348,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 7349,
                                                                                        end: 7352,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 7355,
                                                                                                end: 7358,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 7384,
                                                                                end: 7387,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 7388,
                                                                                        end: 7389,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 7392,
                                                                                        end: 7393,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 7409,
                                                                                                end: 7410,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 7413,
                                                                                                end: 7418,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "binary_value",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: If {
                                                                                                            condition: Expr {
                                                                                                                kind: Binary {
                                                                                                                    left: Expr {
                                                                                                                        kind: IndexAccess {
                                                                                                                            object: Expr {
                                                                                                                                kind: IndexAccess {
                                                                                                                                    object: Expr {
                                                                                                                                        kind: Identifier(
                                                                                                                                            "image",
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 7455,
                                                                                                                                            end: 7460,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    index: Expr {
                                                                                                                                        kind: Identifier(
                                                                                                                                            "i",
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 7461,
                                                                                                                                            end: 7462,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                },
                                                                                                                                span: Span {
                                                                                                                                    start: 0,
                                                                                                                                    end: 0,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                            index: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "j",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 7464,
                                                                                                                                    end: 7465,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        },
                                                                                                                        span: Span {
                                                                                                                            start: 0,
                                                                                                                            end: 0,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    op: GreaterEqual,
                                                                                                                    right: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "threshold",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 7470,
                                                                                                                            end: 7479,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            then_branch: Expr {
                                                                                                                kind: Block(
                                                                                                                    [
                                                                                                                        Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    255,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 7482,
                                                                                                                                end: 7485,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    ],
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 7480,
                                                                                                                    end: 7481,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            else_branch: Some(
                                                                                                                Expr {
                                                                                                                    kind: Block(
                                                                                                                        [
                                                                                                                            Expr {
                                                                                                                                kind: Literal(
                                                                                                                                    Integer(
                                                                                                                                        0,
                                                                                                                                    ),
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 7495,
                                                                                                                                    end: 7496,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 7493,
                                                                                                                        end: 7494,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ),
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 7452,
                                                                                                            end: 7454,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 7512,
                                                                                                                                end: 7515,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "binary_value",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 7521,
                                                                                                                                    end: 7533,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 7548,
                                                                                                                                end: 7549,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 7552,
                                                                                                                                        end: 7553,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 7556,
                                                                                                                                        end: 7557,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 7419,
                                                                                                            end: 7420,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 7419,
                                                                                                    end: 7420,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 7419,
                                                                                        end: 7420,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 7403,
                                                                                end: 7408,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "binary_image",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 7586,
                                                                                        end: 7598,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 7604,
                                                                                            end: 7607,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 7618,
                                                                                        end: 7619,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 7622,
                                                                                                end: 7623,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 7626,
                                                                                                end: 7627,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 7335,
                                                                    end: 7336,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 7318,
                                                            end: 7323,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "binary_image",
                                                        ),
                                                        span: Span {
                                                            start: 7644,
                                                            end: 7656,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 7161,
                                                end: 7162,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 7161,
                                        end: 7162,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 7161,
                            end: 7162,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 7086,
                    end: 7089,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "morphological_erosion",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                        Param {
                            pattern: Identifier(
                                "kernel",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "image_height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 7798,
                                                        end: 7803,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "image_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 7836,
                                                                                    end: 7848,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 7851,
                                                                                    end: 7852,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 7855,
                                                                                                        end: 7860,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 7861,
                                                                                                        end: 7862,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 7853,
                                                                            end: 7854,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 7879,
                                                                                            end: 7880,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 7877,
                                                                                end: 7878,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 7833,
                                                                    end: 7835,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 7815,
                                                            end: 7818,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "kernel",
                                                                        ),
                                                                        span: Span {
                                                                            start: 7908,
                                                                            end: 7914,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 7888,
                                                            end: 7891,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 7948,
                                                                                    end: 7961,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 7964,
                                                                                    end: 7965,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "kernel",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 7968,
                                                                                                        end: 7974,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 7975,
                                                                                                        end: 7976,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 7966,
                                                                            end: 7967,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 7993,
                                                                                            end: 7994,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 7991,
                                                                                end: 7992,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 7945,
                                                                    end: 7947,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 7926,
                                                            end: 7929,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: If {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Binary {
                                                                                    left: Expr {
                                                                                        kind: Binary {
                                                                                            left: Expr {
                                                                                                kind: Identifier(
                                                                                                    "image_height",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 8010,
                                                                                                    end: 8022,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            op: Equal,
                                                                                            right: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        0,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 8026,
                                                                                                    end: 8027,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    op: Or,
                                                                                    right: Expr {
                                                                                        kind: Binary {
                                                                                            left: Expr {
                                                                                                kind: Identifier(
                                                                                                    "image_width",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 8031,
                                                                                                    end: 8042,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            op: Equal,
                                                                                            right: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        0,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 8046,
                                                                                                    end: 8047,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                },
                                                                                span: Span {
                                                                                    start: 0,
                                                                                    end: 0,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Or,
                                                                            right: Expr {
                                                                                kind: Binary {
                                                                                    left: Expr {
                                                                                        kind: Identifier(
                                                                                            "kernel_height",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 8051,
                                                                                            end: 8064,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    op: Equal,
                                                                                    right: Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 8068,
                                                                                            end: 8069,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                },
                                                                                span: Span {
                                                                                    start: 0,
                                                                                    end: 0,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Or,
                                                                    right: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 8073,
                                                                                    end: 8085,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 8089,
                                                                                    end: 8090,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            then_branch: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Return {
                                                                                value: Some(
                                                                                    Expr {
                                                                                        kind: Call {
                                                                                            func: Expr {
                                                                                                kind: QualifiedName {
                                                                                                    module: "Vec",
                                                                                                    name: "new",
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 8108,
                                                                                                    end: 8111,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            args: [],
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ),
                                                                            },
                                                                            span: Span {
                                                                                start: 8101,
                                                                                end: 8107,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 8091,
                                                                    end: 8092,
                                                                },
                                                                attributes: [],
                                                            },
                                                            else_branch: None,
                                                        },
                                                        span: Span {
                                                            start: 8007,
                                                            end: 8009,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 8155,
                                                                                    end: 8167,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 8170,
                                                                                    end: 8183,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 8186,
                                                                            end: 8187,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 8135,
                                                            end: 8138,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 8212,
                                                                                    end: 8223,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 8226,
                                                                                    end: 8238,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 8241,
                                                                            end: 8242,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 8193,
                                                            end: 8196,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 8253,
                                                            end: 8256,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "result",
                                                                ),
                                                                span: Span {
                                                                    start: 8257,
                                                                    end: 8263,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 8266,
                                                                            end: 8269,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 8287,
                                                            end: 8290,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 8291,
                                                                    end: 8292,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 8295,
                                                                    end: 8296,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 8308,
                                                                            end: 8309,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "output_height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 8312,
                                                                            end: 8325,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 8336,
                                                                                end: 8339,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 8340,
                                                                                        end: 8343,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 8346,
                                                                                                end: 8349,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 8375,
                                                                                end: 8378,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 8379,
                                                                                        end: 8380,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 8383,
                                                                                        end: 8384,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 8400,
                                                                                                end: 8401,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "output_width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 8404,
                                                                                                end: 8416,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 8431,
                                                                                                    end: 8434,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "min_val",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 8435,
                                                                                                            end: 8442,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                255,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 8445,
                                                                                                            end: 8448,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 8522,
                                                                                                    end: 8525,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "ki",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 8526,
                                                                                                            end: 8528,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                0,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 8531,
                                                                                                            end: 8532,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: While {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "ki",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 8552,
                                                                                                                    end: 8554,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Less,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "kernel_height",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 8557,
                                                                                                                    end: 8570,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "var",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 8589,
                                                                                                                        end: 8592,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "kj",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 8593,
                                                                                                                                end: 8595,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    0,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 8598,
                                                                                                                                end: 8599,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: While {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "kj",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 8623,
                                                                                                                                        end: 8625,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Less,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "kernel_width",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 8628,
                                                                                                                                        end: 8640,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: If {
                                                                                                                                            condition: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                            object: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "kernel",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 8666,
                                                                                                                                                                            end: 8672,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "ki",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 8673,
                                                                                                                                                                            end: 8675,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            index: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "kj",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 8677,
                                                                                                                                                                    end: 8679,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Equal,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 8684,
                                                                                                                                                            end: 8685,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            then_branch: Expr {
                                                                                                                                                kind: Block(
                                                                                                                                                    [
                                                                                                                                                        Expr {
                                                                                                                                                            kind: Let {
                                                                                                                                                                name: "pixel_val",
                                                                                                                                                                type_annotation: None,
                                                                                                                                                                value: Expr {
                                                                                                                                                                    kind: IndexAccess {
                                                                                                                                                                        object: Expr {
                                                                                                                                                                            kind: IndexAccess {
                                                                                                                                                                                object: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "image",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 8728,
                                                                                                                                                                                        end: 8733,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                index: Expr {
                                                                                                                                                                                    kind: Binary {
                                                                                                                                                                                        left: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "i",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 8734,
                                                                                                                                                                                                end: 8735,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                        op: Add,
                                                                                                                                                                                        right: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "ki",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 8738,
                                                                                                                                                                                                end: 8740,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                    },
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 0,
                                                                                                                                                                                        end: 0,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        index: Expr {
                                                                                                                                                                            kind: Binary {
                                                                                                                                                                                left: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "j",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 8742,
                                                                                                                                                                                        end: 8743,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                op: Add,
                                                                                                                                                                                right: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "kj",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 8746,
                                                                                                                                                                                        end: 8748,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 0,
                                                                                                                                                                        end: 0,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                body: Expr {
                                                                                                                                                                    kind: If {
                                                                                                                                                                        condition: Expr {
                                                                                                                                                                            kind: Binary {
                                                                                                                                                                                left: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "pixel_val",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 8778,
                                                                                                                                                                                        end: 8787,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                op: Less,
                                                                                                                                                                                right: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "min_val",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 8790,
                                                                                                                                                                                        end: 8797,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        then_branch: Expr {
                                                                                                                                                                            kind: Block(
                                                                                                                                                                                [
                                                                                                                                                                                    Expr {
                                                                                                                                                                                        kind: Assign {
                                                                                                                                                                                            target: Expr {
                                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                                    "min_val",
                                                                                                                                                                                                ),
                                                                                                                                                                                                span: Span {
                                                                                                                                                                                                    start: 8828,
                                                                                                                                                                                                    end: 8835,
                                                                                                                                                                                                },
                                                                                                                                                                                                attributes: [],
                                                                                                                                                                                            },
                                                                                                                                                                                            value: Expr {
                                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                                    "pixel_val",
                                                                                                                                                                                                ),
                                                                                                                                                                                                span: Span {
                                                                                                                                                                                                    start: 8838,
                                                                                                                                                                                                    end: 8847,
                                                                                                                                                                                                },
                                                                                                                                                                                                attributes: [],
                                                                                                                                                                                            },
                                                                                                                                                                                        },
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 0,
                                                                                                                                                                                            end: 0,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                ],
                                                                                                                                                                            ),
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 8798,
                                                                                                                                                                                end: 8799,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        else_branch: None,
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 8775,
                                                                                                                                                                        end: 8777,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                is_mutable: false,
                                                                                                                                                            },
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 8686,
                                                                                                                                                                end: 8687,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                    ],
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 8686,
                                                                                                                                                    end: 8687,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            else_branch: None,
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 8663,
                                                                                                                                            end: 8665,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "kj",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 8917,
                                                                                                                                                    end: 8919,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "kj",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 8922,
                                                                                                                                                            end: 8924,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 8927,
                                                                                                                                                            end: 8928,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 8641,
                                                                                                                                end: 8642,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 8617,
                                                                                                                        end: 8622,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "ki",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 8964,
                                                                                                                                end: 8966,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "ki",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 8969,
                                                                                                                                        end: 8971,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 8974,
                                                                                                                                        end: 8975,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 8571,
                                                                                                            end: 8572,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 8546,
                                                                                                    end: 8551,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: MethodCall {
                                                                                                    receiver: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "row",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 9016,
                                                                                                            end: 9019,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    method: "push",
                                                                                                    args: [
                                                                                                        Expr {
                                                                                                            kind: Identifier(
                                                                                                                "min_val",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 9025,
                                                                                                                end: 9032,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                    ],
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "j",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 9047,
                                                                                                            end: 9048,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 9051,
                                                                                                                    end: 9052,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Add,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        1,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 9055,
                                                                                                                    end: 9056,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 8417,
                                                                                        end: 8418,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 8394,
                                                                                end: 8399,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "result",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 9085,
                                                                                        end: 9091,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 9097,
                                                                                            end: 9100,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 9111,
                                                                                        end: 9112,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 9115,
                                                                                                end: 9116,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 9119,
                                                                                                end: 9120,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 8326,
                                                                    end: 8327,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 8302,
                                                            end: 8307,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "result",
                                                        ),
                                                        span: Span {
                                                            start: 9137,
                                                            end: 9143,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 7773,
                                                end: 7774,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 7773,
                                        end: 7774,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 7773,
                            end: 7774,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 7685,
                    end: 7688,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "morphological_dilation",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                        Param {
                            pattern: Identifier(
                                "kernel",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "image_height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 9287,
                                                        end: 9292,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "image_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9325,
                                                                                    end: 9337,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9340,
                                                                                    end: 9341,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 9344,
                                                                                                        end: 9349,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 9350,
                                                                                                        end: 9351,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 9342,
                                                                            end: 9343,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 9368,
                                                                                            end: 9369,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 9366,
                                                                                end: 9367,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 9322,
                                                                    end: 9324,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 9304,
                                                            end: 9307,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "kernel",
                                                                        ),
                                                                        span: Span {
                                                                            start: 9397,
                                                                            end: 9403,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 9377,
                                                            end: 9380,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9437,
                                                                                    end: 9450,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9453,
                                                                                    end: 9454,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "kernel",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 9457,
                                                                                                        end: 9463,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 9464,
                                                                                                        end: 9465,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 9455,
                                                                            end: 9456,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 9482,
                                                                                            end: 9483,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 9480,
                                                                                end: 9481,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 9434,
                                                                    end: 9436,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 9415,
                                                            end: 9418,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: If {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Binary {
                                                                                    left: Expr {
                                                                                        kind: Binary {
                                                                                            left: Expr {
                                                                                                kind: Identifier(
                                                                                                    "image_height",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 9499,
                                                                                                    end: 9511,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            op: Equal,
                                                                                            right: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        0,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 9515,
                                                                                                    end: 9516,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    op: Or,
                                                                                    right: Expr {
                                                                                        kind: Binary {
                                                                                            left: Expr {
                                                                                                kind: Identifier(
                                                                                                    "image_width",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 9520,
                                                                                                    end: 9531,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            op: Equal,
                                                                                            right: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        0,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 9535,
                                                                                                    end: 9536,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                },
                                                                                span: Span {
                                                                                    start: 0,
                                                                                    end: 0,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Or,
                                                                            right: Expr {
                                                                                kind: Binary {
                                                                                    left: Expr {
                                                                                        kind: Identifier(
                                                                                            "kernel_height",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 9540,
                                                                                            end: 9553,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    op: Equal,
                                                                                    right: Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 9557,
                                                                                            end: 9558,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                },
                                                                                span: Span {
                                                                                    start: 0,
                                                                                    end: 0,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Or,
                                                                    right: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9562,
                                                                                    end: 9574,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9578,
                                                                                    end: 9579,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            then_branch: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Return {
                                                                                value: Some(
                                                                                    Expr {
                                                                                        kind: Call {
                                                                                            func: Expr {
                                                                                                kind: QualifiedName {
                                                                                                    module: "Vec",
                                                                                                    name: "new",
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 9597,
                                                                                                    end: 9600,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            args: [],
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ),
                                                                            },
                                                                            span: Span {
                                                                                start: 9590,
                                                                                end: 9596,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 9580,
                                                                    end: 9581,
                                                                },
                                                                attributes: [],
                                                            },
                                                            else_branch: None,
                                                        },
                                                        span: Span {
                                                            start: 9496,
                                                            end: 9498,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9644,
                                                                                    end: 9656,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9659,
                                                                                    end: 9672,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 9675,
                                                                            end: 9676,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 9624,
                                                            end: 9627,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9701,
                                                                                    end: 9712,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "kernel_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 9715,
                                                                                    end: 9727,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 9730,
                                                                            end: 9731,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 9682,
                                                            end: 9685,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 9742,
                                                            end: 9745,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "result",
                                                                ),
                                                                span: Span {
                                                                    start: 9746,
                                                                    end: 9752,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 9755,
                                                                            end: 9758,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 9776,
                                                            end: 9779,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 9780,
                                                                    end: 9781,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 9784,
                                                                    end: 9785,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 9797,
                                                                            end: 9798,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "output_height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 9801,
                                                                            end: 9814,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 9825,
                                                                                end: 9828,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 9829,
                                                                                        end: 9832,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 9835,
                                                                                                end: 9838,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 9864,
                                                                                end: 9867,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 9868,
                                                                                        end: 9869,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 9872,
                                                                                        end: 9873,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 9889,
                                                                                                end: 9890,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "output_width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 9893,
                                                                                                end: 9905,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 9920,
                                                                                                    end: 9923,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "max_val",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 9924,
                                                                                                            end: 9931,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                0,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 9934,
                                                                                                            end: 9935,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 10009,
                                                                                                    end: 10012,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "ki",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 10013,
                                                                                                            end: 10015,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                0,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 10018,
                                                                                                            end: 10019,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: While {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "ki",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 10039,
                                                                                                                    end: 10041,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Less,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "kernel_height",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 10044,
                                                                                                                    end: 10057,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "var",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 10076,
                                                                                                                        end: 10079,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "kj",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 10080,
                                                                                                                                end: 10082,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    0,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 10085,
                                                                                                                                end: 10086,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: While {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "kj",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 10110,
                                                                                                                                        end: 10112,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Less,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "kernel_width",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 10115,
                                                                                                                                        end: 10127,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: If {
                                                                                                                                            condition: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                            object: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "kernel",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 10153,
                                                                                                                                                                            end: 10159,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "ki",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 10160,
                                                                                                                                                                            end: 10162,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            index: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "kj",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 10164,
                                                                                                                                                                    end: 10166,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Equal,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 10171,
                                                                                                                                                            end: 10172,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            then_branch: Expr {
                                                                                                                                                kind: Block(
                                                                                                                                                    [
                                                                                                                                                        Expr {
                                                                                                                                                            kind: Let {
                                                                                                                                                                name: "pixel_val",
                                                                                                                                                                type_annotation: None,
                                                                                                                                                                value: Expr {
                                                                                                                                                                    kind: IndexAccess {
                                                                                                                                                                        object: Expr {
                                                                                                                                                                            kind: IndexAccess {
                                                                                                                                                                                object: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "image",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 10215,
                                                                                                                                                                                        end: 10220,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                index: Expr {
                                                                                                                                                                                    kind: Binary {
                                                                                                                                                                                        left: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "i",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 10221,
                                                                                                                                                                                                end: 10222,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                        op: Add,
                                                                                                                                                                                        right: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "ki",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 10225,
                                                                                                                                                                                                end: 10227,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                    },
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 0,
                                                                                                                                                                                        end: 0,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        index: Expr {
                                                                                                                                                                            kind: Binary {
                                                                                                                                                                                left: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "j",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 10229,
                                                                                                                                                                                        end: 10230,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                op: Add,
                                                                                                                                                                                right: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "kj",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 10233,
                                                                                                                                                                                        end: 10235,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 0,
                                                                                                                                                                        end: 0,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                body: Expr {
                                                                                                                                                                    kind: If {
                                                                                                                                                                        condition: Expr {
                                                                                                                                                                            kind: Binary {
                                                                                                                                                                                left: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "pixel_val",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 10265,
                                                                                                                                                                                        end: 10274,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                op: Greater,
                                                                                                                                                                                right: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "max_val",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 10277,
                                                                                                                                                                                        end: 10284,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        then_branch: Expr {
                                                                                                                                                                            kind: Block(
                                                                                                                                                                                [
                                                                                                                                                                                    Expr {
                                                                                                                                                                                        kind: Assign {
                                                                                                                                                                                            target: Expr {
                                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                                    "max_val",
                                                                                                                                                                                                ),
                                                                                                                                                                                                span: Span {
                                                                                                                                                                                                    start: 10315,
                                                                                                                                                                                                    end: 10322,
                                                                                                                                                                                                },
                                                                                                                                                                                                attributes: [],
                                                                                                                                                                                            },
                                                                                                                                                                                            value: Expr {
                                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                                    "pixel_val",
                                                                                                                                                                                                ),
                                                                                                                                                                                                span: Span {
                                                                                                                                                                                                    start: 10325,
                                                                                                                                                                                                    end: 10334,
                                                                                                                                                                                                },
                                                                                                                                                                                                attributes: [],
                                                                                                                                                                                            },
                                                                                                                                                                                        },
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 0,
                                                                                                                                                                                            end: 0,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                ],
                                                                                                                                                                            ),
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 10285,
                                                                                                                                                                                end: 10286,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        else_branch: None,
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 10262,
                                                                                                                                                                        end: 10264,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                is_mutable: false,
                                                                                                                                                            },
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 10173,
                                                                                                                                                                end: 10174,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                    ],
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 10173,
                                                                                                                                                    end: 10174,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            else_branch: None,
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 10150,
                                                                                                                                            end: 10152,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "kj",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 10404,
                                                                                                                                                    end: 10406,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "kj",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 10409,
                                                                                                                                                            end: 10411,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 10414,
                                                                                                                                                            end: 10415,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 10128,
                                                                                                                                end: 10129,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 10104,
                                                                                                                        end: 10109,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "ki",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 10451,
                                                                                                                                end: 10453,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "ki",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 10456,
                                                                                                                                        end: 10458,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 10461,
                                                                                                                                        end: 10462,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 10058,
                                                                                                            end: 10059,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 10033,
                                                                                                    end: 10038,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: MethodCall {
                                                                                                    receiver: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "row",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 10503,
                                                                                                            end: 10506,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    method: "push",
                                                                                                    args: [
                                                                                                        Expr {
                                                                                                            kind: Identifier(
                                                                                                                "max_val",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 10512,
                                                                                                                end: 10519,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                    ],
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "j",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 10534,
                                                                                                            end: 10535,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 10538,
                                                                                                                    end: 10539,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Add,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        1,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 10542,
                                                                                                                    end: 10543,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 9906,
                                                                                        end: 9907,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 9883,
                                                                                end: 9888,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "result",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 10572,
                                                                                        end: 10578,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 10584,
                                                                                            end: 10587,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 10598,
                                                                                        end: 10599,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 10602,
                                                                                                end: 10603,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 10606,
                                                                                                end: 10607,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 9815,
                                                                    end: 9816,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 9791,
                                                            end: 9796,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "result",
                                                        ),
                                                        span: Span {
                                                            start: 10624,
                                                            end: 10630,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 9262,
                                                end: 9263,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 9262,
                                        end: 9263,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 9262,
                            end: 9263,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 9173,
                    end: 9176,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "template_matching",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                        Param {
                            pattern: Identifier(
                                "template",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "image_height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 10801,
                                                        end: 10806,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "image_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 10839,
                                                                                    end: 10851,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 10854,
                                                                                    end: 10855,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 10858,
                                                                                                        end: 10863,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 10864,
                                                                                                        end: 10865,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 10856,
                                                                            end: 10857,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 10882,
                                                                                            end: 10883,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 10880,
                                                                                end: 10881,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 10836,
                                                                    end: 10838,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 10818,
                                                            end: 10821,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "template_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "template",
                                                                        ),
                                                                        span: Span {
                                                                            start: 10913,
                                                                            end: 10921,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 10891,
                                                            end: 10894,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "template_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "template_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 10957,
                                                                                    end: 10972,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 10975,
                                                                                    end: 10976,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "template",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 10979,
                                                                                                        end: 10987,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 10988,
                                                                                                        end: 10989,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 10977,
                                                                            end: 10978,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 11006,
                                                                                            end: 11007,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 11004,
                                                                                end: 11005,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 10954,
                                                                    end: 10956,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 10933,
                                                            end: 10936,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: If {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11023,
                                                                                    end: 11035,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11039,
                                                                                    end: 11040,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Or,
                                                                    right: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "template_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11044,
                                                                                    end: 11059,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11063,
                                                                                    end: 11064,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            then_branch: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Return {
                                                                                value: Some(
                                                                                    Expr {
                                                                                        kind: Call {
                                                                                            func: Expr {
                                                                                                kind: QualifiedName {
                                                                                                    module: "Vec",
                                                                                                    name: "new",
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 11082,
                                                                                                    end: 11085,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            args: [],
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ),
                                                                            },
                                                                            span: Span {
                                                                                start: 11075,
                                                                                end: 11081,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 11065,
                                                                    end: 11066,
                                                                },
                                                                attributes: [],
                                                            },
                                                            else_branch: None,
                                                        },
                                                        span: Span {
                                                            start: 11020,
                                                            end: 11022,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11129,
                                                                                    end: 11141,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "template_height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11144,
                                                                                    end: 11159,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 11162,
                                                                            end: 11163,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 11109,
                                                            end: 11112,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "output_width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "image_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11188,
                                                                                    end: 11199,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Identifier(
                                                                                    "template_width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 11202,
                                                                                    end: 11216,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Add,
                                                                    right: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                1,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 11219,
                                                                            end: 11220,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 11169,
                                                            end: 11172,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 11231,
                                                            end: 11234,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "result",
                                                                ),
                                                                span: Span {
                                                                    start: 11235,
                                                                    end: 11241,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 11244,
                                                                            end: 11247,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 11265,
                                                            end: 11268,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 11269,
                                                                    end: 11270,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 11273,
                                                                    end: 11274,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 11286,
                                                                            end: 11287,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "output_height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 11290,
                                                                            end: 11303,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 11314,
                                                                                end: 11317,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 11318,
                                                                                        end: 11321,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 11324,
                                                                                                end: 11327,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 11353,
                                                                                end: 11356,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 11357,
                                                                                        end: 11358,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 11361,
                                                                                        end: 11362,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 11378,
                                                                                                end: 11379,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "output_width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 11382,
                                                                                                end: 11394,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 11409,
                                                                                                    end: 11412,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "correlation",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 11413,
                                                                                                            end: 11424,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                0,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 11427,
                                                                                                            end: 11428,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Identifier(
                                                                                                    "var",
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 11509,
                                                                                                    end: 11512,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "ti",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 11513,
                                                                                                            end: 11515,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Literal(
                                                                                                            Integer(
                                                                                                                0,
                                                                                                            ),
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 11518,
                                                                                                            end: 11519,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: While {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "ti",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 11539,
                                                                                                                    end: 11541,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Less,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "template_height",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 11544,
                                                                                                                    end: 11559,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "var",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 11578,
                                                                                                                        end: 11581,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "tj",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 11582,
                                                                                                                                end: 11584,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    0,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 11587,
                                                                                                                                end: 11588,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: While {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "tj",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 11612,
                                                                                                                                        end: 11614,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Less,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "template_width",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 11617,
                                                                                                                                        end: 11631,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "correlation",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 11654,
                                                                                                                                                    end: 11665,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "correlation",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 11668,
                                                                                                                                                            end: 11679,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Binary {
                                                                                                                                                            left: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                                            object: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "image",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 11683,
                                                                                                                                                                                    end: 11688,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                            index: Expr {
                                                                                                                                                                                kind: Binary {
                                                                                                                                                                                    left: Expr {
                                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                                            "i",
                                                                                                                                                                                        ),
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 11689,
                                                                                                                                                                                            end: 11690,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                    op: Add,
                                                                                                                                                                                    right: Expr {
                                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                                            "ti",
                                                                                                                                                                                        ),
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 11693,
                                                                                                                                                                                            end: 11695,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                },
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 0,
                                                                                                                                                                                    end: 0,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        },
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 0,
                                                                                                                                                                            end: 0,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Binary {
                                                                                                                                                                            left: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "j",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 11697,
                                                                                                                                                                                    end: 11698,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                            op: Add,
                                                                                                                                                                            right: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "tj",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 11701,
                                                                                                                                                                                    end: 11703,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        },
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 0,
                                                                                                                                                                            end: 0,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            op: Multiply,
                                                                                                                                                            right: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                                            object: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "template",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 11707,
                                                                                                                                                                                    end: 11715,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                            index: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "ti",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 11716,
                                                                                                                                                                                    end: 11718,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        },
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 0,
                                                                                                                                                                            end: 0,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "tj",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 11720,
                                                                                                                                                                            end: 11722,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "tj",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 11746,
                                                                                                                                                    end: 11748,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "tj",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 11751,
                                                                                                                                                            end: 11753,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 11756,
                                                                                                                                                            end: 11757,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 11632,
                                                                                                                                end: 11633,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 11606,
                                                                                                                        end: 11611,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "ti",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 11793,
                                                                                                                                end: 11795,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "ti",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 11798,
                                                                                                                                        end: 11800,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 11803,
                                                                                                                                        end: 11804,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 11560,
                                                                                                            end: 11561,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 11533,
                                                                                                    end: 11538,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "template_size",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "template_height",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 11915,
                                                                                                                    end: 11930,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Multiply,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "template_width",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 11933,
                                                                                                                    end: 11947,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "normalized_correlation",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "correlation",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 11990,
                                                                                                                                        end: 12001,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Divide,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "template_size",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 12004,
                                                                                                                                        end: 12017,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 11961,
                                                                                                                        end: 11964,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "correlation_score",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: If {
                                                                                                                                condition: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "normalized_correlation",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 12109,
                                                                                                                                                end: 12131,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Greater,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    255,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 12134,
                                                                                                                                                end: 12137,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                then_branch: Expr {
                                                                                                                                    kind: Block(
                                                                                                                                        [
                                                                                                                                            Expr {
                                                                                                                                                kind: Literal(
                                                                                                                                                    Integer(
                                                                                                                                                        255,
                                                                                                                                                    ),
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 12140,
                                                                                                                                                    end: 12143,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 12138,
                                                                                                                                        end: 12139,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                else_branch: Some(
                                                                                                                                    Expr {
                                                                                                                                        kind: Block(
                                                                                                                                            [
                                                                                                                                                Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "normalized_correlation",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 12153,
                                                                                                                                                        end: 12175,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            ],
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 12151,
                                                                                                                                            end: 12152,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ),
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 12106,
                                                                                                                                end: 12108,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 12082,
                                                                                                                        end: 12085,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 12191,
                                                                                                                                end: 12194,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "correlation_score",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 12200,
                                                                                                                                    end: 12217,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 12232,
                                                                                                                                end: 12233,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 12236,
                                                                                                                                        end: 12237,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 12240,
                                                                                                                                        end: 12241,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 11395,
                                                                                                            end: 11396,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 11395,
                                                                                                    end: 11396,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 11395,
                                                                                        end: 11396,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 11372,
                                                                                end: 11377,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "result",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 12270,
                                                                                        end: 12276,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 12282,
                                                                                            end: 12285,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 12296,
                                                                                        end: 12297,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 12300,
                                                                                                end: 12301,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 12304,
                                                                                                end: 12305,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 11304,
                                                                    end: 11305,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 11280,
                                                            end: 11285,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "result",
                                                        ),
                                                        span: Span {
                                                            start: 12322,
                                                            end: 12328,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 10776,
                                                end: 10777,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 10776,
                                        end: 10777,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 10776,
                            end: 10777,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 10690,
                    end: 10693,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "detect_corners",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "gradients",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: Call {
                                                func: Expr {
                                                    kind: Identifier(
                                                        "calculate_gradients",
                                                    ),
                                                    span: Span {
                                                        start: 12488,
                                                        end: 12507,
                                                    },
                                                    attributes: [],
                                                },
                                                args: [
                                                    Expr {
                                                        kind: Identifier(
                                                            "image",
                                                        ),
                                                        span: Span {
                                                            start: 12508,
                                                            end: 12513,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "grad_x",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: IndexAccess {
                                                                            object: Expr {
                                                                                kind: Identifier(
                                                                                    "gradients",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 12533,
                                                                                    end: 12542,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            index: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 12543,
                                                                                    end: 12544,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "clone",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 12520,
                                                            end: 12523,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "grad_y",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: IndexAccess {
                                                                            object: Expr {
                                                                                kind: Identifier(
                                                                                    "gradients",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 12572,
                                                                                    end: 12581,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            index: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        1,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 12582,
                                                                                    end: 12583,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "clone",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 12559,
                                                            end: 12562,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "height",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: MethodCall {
                                                                    receiver: Expr {
                                                                        kind: Identifier(
                                                                            "grad_x",
                                                                        ),
                                                                        span: Span {
                                                                            start: 12616,
                                                                            end: 12622,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    method: "len",
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 12603,
                                                            end: 12606,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 12649,
                                                                                    end: 12655,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 12658,
                                                                                    end: 12659,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "grad_x",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 12662,
                                                                                                        end: 12668,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 12669,
                                                                                                        end: 12670,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 12660,
                                                                            end: 12661,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 12687,
                                                                                            end: 12688,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 12685,
                                                                                end: 12686,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 12646,
                                                                    end: 12648,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 12634,
                                                            end: 12637,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 12701,
                                                            end: 12704,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "corner_response",
                                                                ),
                                                                span: Span {
                                                                    start: 12705,
                                                                    end: 12720,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 12723,
                                                                            end: 12726,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 12744,
                                                            end: 12747,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 12748,
                                                                    end: 12749,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 12752,
                                                                    end: 12753,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 12765,
                                                                            end: 12766,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 12769,
                                                                            end: 12775,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 12786,
                                                                                end: 12789,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 12790,
                                                                                        end: 12793,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 12796,
                                                                                                end: 12799,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 12825,
                                                                                end: 12828,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 12829,
                                                                                        end: 12830,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 12833,
                                                                                        end: 12834,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 12850,
                                                                                                end: 12851,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 12854,
                                                                                                end: 12859,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "gx",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: IndexAccess {
                                                                                                            object: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "grad_x",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 12883,
                                                                                                                            end: 12889,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "i",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 12890,
                                                                                                                            end: 12891,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            index: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 12893,
                                                                                                                    end: 12894,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "gy",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: IndexAccess {
                                                                                                                                object: Expr {
                                                                                                                                    kind: IndexAccess {
                                                                                                                                        object: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "grad_y",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 12918,
                                                                                                                                                end: 12924,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        index: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "i",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 12925,
                                                                                                                                                end: 12926,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                index: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 12928,
                                                                                                                                        end: 12929,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 12909,
                                                                                                                        end: 12912,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "gx2",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gx",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13119,
                                                                                                                                        end: 13121,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Multiply,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gx",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13124,
                                                                                                                                        end: 13126,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13109,
                                                                                                                        end: 13112,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "gy2",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gy",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13150,
                                                                                                                                        end: 13152,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Multiply,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gy",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13155,
                                                                                                                                        end: 13157,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13140,
                                                                                                                        end: 13143,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "gxgy",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gx",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13182,
                                                                                                                                        end: 13184,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Multiply,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gy",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13187,
                                                                                                                                        end: 13189,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13171,
                                                                                                                        end: 13174,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "det",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "gx2",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13226,
                                                                                                                                                end: 13229,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Multiply,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "gy2",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13232,
                                                                                                                                                end: 13235,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Subtract,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "gxgy",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13238,
                                                                                                                                                end: 13242,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Multiply,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "gxgy",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13245,
                                                                                                                                                end: 13249,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13216,
                                                                                                                        end: 13219,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "trace",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gx2",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13275,
                                                                                                                                        end: 13278,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "gy2",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13281,
                                                                                                                                        end: 13284,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13263,
                                                                                                                        end: 13266,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "k",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Integer(
                                                                                                                                    4,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 13306,
                                                                                                                                end: 13307,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13298,
                                                                                                                        end: 13301,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "response",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "det",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13401,
                                                                                                                                        end: 13404,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Subtract,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Binary {
                                                                                                                                                left: Expr {
                                                                                                                                                    kind: Binary {
                                                                                                                                                        left: Expr {
                                                                                                                                                            kind: Identifier(
                                                                                                                                                                "k",
                                                                                                                                                            ),
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 13408,
                                                                                                                                                                end: 13409,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                        op: Multiply,
                                                                                                                                                        right: Expr {
                                                                                                                                                            kind: Identifier(
                                                                                                                                                                "trace",
                                                                                                                                                            ),
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 13412,
                                                                                                                                                                end: 13417,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                    },
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 0,
                                                                                                                                                        end: 0,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                                op: Multiply,
                                                                                                                                                right: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "trace",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 13420,
                                                                                                                                                        end: 13425,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            },
                                                                                                                                            span: Span {
                                                                                                                                                start: 0,
                                                                                                                                                end: 0,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Divide,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    100,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13429,
                                                                                                                                                end: 13432,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13386,
                                                                                                                        end: 13389,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "positive_response",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: If {
                                                                                                                                condition: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "response",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13545,
                                                                                                                                                end: 13553,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Greater,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    0,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13556,
                                                                                                                                                end: 13557,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                then_branch: Expr {
                                                                                                                                    kind: Block(
                                                                                                                                        [
                                                                                                                                            Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "response",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 13560,
                                                                                                                                                            end: 13568,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Divide,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1000,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 13571,
                                                                                                                                                            end: 13575,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13558,
                                                                                                                                        end: 13559,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                else_branch: Some(
                                                                                                                                    Expr {
                                                                                                                                        kind: Block(
                                                                                                                                            [
                                                                                                                                                Expr {
                                                                                                                                                    kind: Literal(
                                                                                                                                                        Integer(
                                                                                                                                                            0,
                                                                                                                                                        ),
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 13585,
                                                                                                                                                        end: 13586,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            ],
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 13583,
                                                                                                                                            end: 13584,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ),
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 13542,
                                                                                                                                end: 13544,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13518,
                                                                                                                        end: 13521,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "clamped_response",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: If {
                                                                                                                                condition: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "positive_response",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13628,
                                                                                                                                                end: 13645,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Greater,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    255,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 13648,
                                                                                                                                                end: 13651,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                then_branch: Expr {
                                                                                                                                    kind: Block(
                                                                                                                                        [
                                                                                                                                            Expr {
                                                                                                                                                kind: Literal(
                                                                                                                                                    Integer(
                                                                                                                                                        255,
                                                                                                                                                    ),
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 13654,
                                                                                                                                                    end: 13657,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13652,
                                                                                                                                        end: 13653,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                else_branch: Some(
                                                                                                                                    Expr {
                                                                                                                                        kind: Block(
                                                                                                                                            [
                                                                                                                                                Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "positive_response",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 13667,
                                                                                                                                                        end: 13684,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            ],
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 13665,
                                                                                                                                            end: 13666,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ),
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 13625,
                                                                                                                                end: 13627,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 13602,
                                                                                                                        end: 13605,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 13713,
                                                                                                                                end: 13716,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "clamped_response",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 13722,
                                                                                                                                    end: 13738,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 13753,
                                                                                                                                end: 13754,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13757,
                                                                                                                                        end: 13758,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 13761,
                                                                                                                                        end: 13762,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 12860,
                                                                                                            end: 12861,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 12860,
                                                                                                    end: 12861,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 12860,
                                                                                        end: 12861,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 12844,
                                                                                end: 12849,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "corner_response",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 13791,
                                                                                        end: 13806,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 13812,
                                                                                            end: 13815,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 13826,
                                                                                        end: 13827,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 13830,
                                                                                                end: 13831,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 13834,
                                                                                                end: 13835,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 12776,
                                                                    end: 12777,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 12759,
                                                            end: 12764,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "corner_response",
                                                        ),
                                                        span: Span {
                                                            start: 13852,
                                                            end: 13867,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 12439,
                                                end: 12440,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 12439,
                                        end: 12440,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 12439,
                            end: 12440,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 12381,
                    end: 12384,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "calculate_gradients",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Generic {
                                                        base: "Vec",
                                                        params: [
                                                            Type {
                                                                kind: Named(
                                                                    "i32",
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                            },
                                                        ],
                                                    },
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 14019,
                                                        end: 14024,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 14051,
                                                                                    end: 14057,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 14060,
                                                                                    end: 14061,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 14064,
                                                                                                        end: 14069,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 14070,
                                                                                                        end: 14071,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 14062,
                                                                            end: 14063,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 14088,
                                                                                            end: 14089,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 14086,
                                                                                end: 14087,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 14048,
                                                                    end: 14050,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 14036,
                                                            end: 14039,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 14102,
                                                            end: 14105,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "grad_x",
                                                                ),
                                                                span: Span {
                                                                    start: 14106,
                                                                    end: 14112,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 14115,
                                                                            end: 14118,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 14131,
                                                            end: 14134,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "grad_y",
                                                                ),
                                                                span: Span {
                                                                    start: 14135,
                                                                    end: 14141,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 14144,
                                                                            end: 14147,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 14165,
                                                            end: 14168,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 14169,
                                                                    end: 14170,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 14173,
                                                                    end: 14174,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 14186,
                                                                            end: 14187,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 14190,
                                                                            end: 14196,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 14207,
                                                                                end: 14210,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "gx_row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 14211,
                                                                                        end: 14217,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 14220,
                                                                                                end: 14223,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 14240,
                                                                                end: 14243,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "gy_row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 14244,
                                                                                        end: 14250,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 14253,
                                                                                                end: 14256,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 14282,
                                                                                end: 14285,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 14286,
                                                                                        end: 14287,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 14290,
                                                                                        end: 14291,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 14307,
                                                                                                end: 14308,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 14311,
                                                                                                end: 14316,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "gx",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: If {
                                                                                                            condition: Expr {
                                                                                                                kind: Binary {
                                                                                                                    left: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "j",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 14393,
                                                                                                                            end: 14394,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    op: Less,
                                                                                                                    right: Expr {
                                                                                                                        kind: Binary {
                                                                                                                            left: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "width",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 14397,
                                                                                                                                    end: 14402,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                            op: Subtract,
                                                                                                                            right: Expr {
                                                                                                                                kind: Literal(
                                                                                                                                    Integer(
                                                                                                                                        1,
                                                                                                                                    ),
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 14405,
                                                                                                                                    end: 14406,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        },
                                                                                                                        span: Span {
                                                                                                                            start: 0,
                                                                                                                            end: 0,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            then_branch: Expr {
                                                                                                                kind: Block(
                                                                                                                    [
                                                                                                                        Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: IndexAccess {
                                                                                                                                        object: Expr {
                                                                                                                                            kind: IndexAccess {
                                                                                                                                                object: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "image",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14425,
                                                                                                                                                        end: 14430,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                                index: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "i",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14431,
                                                                                                                                                        end: 14432,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            },
                                                                                                                                            span: Span {
                                                                                                                                                start: 0,
                                                                                                                                                end: 0,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        index: Expr {
                                                                                                                                            kind: Binary {
                                                                                                                                                left: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "j",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14434,
                                                                                                                                                        end: 14435,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                                op: Add,
                                                                                                                                                right: Expr {
                                                                                                                                                    kind: Literal(
                                                                                                                                                        Integer(
                                                                                                                                                            1,
                                                                                                                                                        ),
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14438,
                                                                                                                                                        end: 14439,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            },
                                                                                                                                            span: Span {
                                                                                                                                                start: 0,
                                                                                                                                                end: 0,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Subtract,
                                                                                                                                right: Expr {
                                                                                                                                    kind: IndexAccess {
                                                                                                                                        object: Expr {
                                                                                                                                            kind: IndexAccess {
                                                                                                                                                object: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "image",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14443,
                                                                                                                                                        end: 14448,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                                index: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "i",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14449,
                                                                                                                                                        end: 14450,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            },
                                                                                                                                            span: Span {
                                                                                                                                                start: 0,
                                                                                                                                                end: 0,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        index: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "j",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 14452,
                                                                                                                                                end: 14453,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    ],
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 14407,
                                                                                                                    end: 14408,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            else_branch: Some(
                                                                                                                Expr {
                                                                                                                    kind: If {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 14477,
                                                                                                                                        end: 14478,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Greater,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            0,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 14481,
                                                                                                                                        end: 14482,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        then_branch: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: Binary {
                                                                                                                                            left: Expr {
                                                                                                                                                kind: IndexAccess {
                                                                                                                                                    object: Expr {
                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                            object: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "image",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14501,
                                                                                                                                                                    end: 14506,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            index: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "i",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14507,
                                                                                                                                                                    end: 14508,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    index: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "j",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 14510,
                                                                                                                                                            end: 14511,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            op: Subtract,
                                                                                                                                            right: Expr {
                                                                                                                                                kind: IndexAccess {
                                                                                                                                                    object: Expr {
                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                            object: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "image",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14515,
                                                                                                                                                                    end: 14520,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            index: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "i",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14521,
                                                                                                                                                                    end: 14522,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    index: Expr {
                                                                                                                                                        kind: Binary {
                                                                                                                                                            left: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "j",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14524,
                                                                                                                                                                    end: 14525,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            op: Subtract,
                                                                                                                                                            right: Expr {
                                                                                                                                                                kind: Literal(
                                                                                                                                                                    Integer(
                                                                                                                                                                        1,
                                                                                                                                                                    ),
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14528,
                                                                                                                                                                    end: 14529,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 14483,
                                                                                                                                end: 14484,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        else_branch: Some(
                                                                                                                            Expr {
                                                                                                                                kind: Block(
                                                                                                                                    [
                                                                                                                                        Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    0,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 14568,
                                                                                                                                                end: 14569,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    ],
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 14550,
                                                                                                                                    end: 14551,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ),
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 14474,
                                                                                                                        end: 14476,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ),
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 14390,
                                                                                                            end: 14392,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Let {
                                                                                                                        name: "gy",
                                                                                                                        type_annotation: None,
                                                                                                                        value: Expr {
                                                                                                                            kind: If {
                                                                                                                                condition: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "i",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 14670,
                                                                                                                                                end: 14671,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Less,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Binary {
                                                                                                                                                left: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "height",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14674,
                                                                                                                                                        end: 14680,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                                op: Subtract,
                                                                                                                                                right: Expr {
                                                                                                                                                    kind: Literal(
                                                                                                                                                        Integer(
                                                                                                                                                            1,
                                                                                                                                                        ),
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14683,
                                                                                                                                                        end: 14684,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            },
                                                                                                                                            span: Span {
                                                                                                                                                start: 0,
                                                                                                                                                end: 0,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                then_branch: Expr {
                                                                                                                                    kind: Block(
                                                                                                                                        [
                                                                                                                                            Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                            object: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "image",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 14703,
                                                                                                                                                                            end: 14708,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Binary {
                                                                                                                                                                            left: Expr {
                                                                                                                                                                                kind: Identifier(
                                                                                                                                                                                    "i",
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 14709,
                                                                                                                                                                                    end: 14710,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                            op: Add,
                                                                                                                                                                            right: Expr {
                                                                                                                                                                                kind: Literal(
                                                                                                                                                                                    Integer(
                                                                                                                                                                                        1,
                                                                                                                                                                                    ),
                                                                                                                                                                                ),
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 14713,
                                                                                                                                                                                    end: 14714,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        },
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 0,
                                                                                                                                                                            end: 0,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            index: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "j",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14716,
                                                                                                                                                                    end: 14717,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Subtract,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: IndexAccess {
                                                                                                                                                            object: Expr {
                                                                                                                                                                kind: IndexAccess {
                                                                                                                                                                    object: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "image",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 14721,
                                                                                                                                                                            end: 14726,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                    index: Expr {
                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                            "i",
                                                                                                                                                                        ),
                                                                                                                                                                        span: Span {
                                                                                                                                                                            start: 14727,
                                                                                                                                                                            end: 14728,
                                                                                                                                                                        },
                                                                                                                                                                        attributes: [],
                                                                                                                                                                    },
                                                                                                                                                                },
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 0,
                                                                                                                                                                    end: 0,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            index: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "j",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14730,
                                                                                                                                                                    end: 14731,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 14685,
                                                                                                                                        end: 14686,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                else_branch: Some(
                                                                                                                                    Expr {
                                                                                                                                        kind: If {
                                                                                                                                            condition: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "i",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 14755,
                                                                                                                                                            end: 14756,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Greater,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                0,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 14759,
                                                                                                                                                            end: 14760,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            then_branch: Expr {
                                                                                                                                                kind: Block(
                                                                                                                                                    [
                                                                                                                                                        Expr {
                                                                                                                                                            kind: Binary {
                                                                                                                                                                left: Expr {
                                                                                                                                                                    kind: IndexAccess {
                                                                                                                                                                        object: Expr {
                                                                                                                                                                            kind: IndexAccess {
                                                                                                                                                                                object: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "image",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 14779,
                                                                                                                                                                                        end: 14784,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                index: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "i",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 14785,
                                                                                                                                                                                        end: 14786,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        index: Expr {
                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                "j",
                                                                                                                                                                            ),
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 14788,
                                                                                                                                                                                end: 14789,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 0,
                                                                                                                                                                        end: 0,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                op: Subtract,
                                                                                                                                                                right: Expr {
                                                                                                                                                                    kind: IndexAccess {
                                                                                                                                                                        object: Expr {
                                                                                                                                                                            kind: IndexAccess {
                                                                                                                                                                                object: Expr {
                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                        "image",
                                                                                                                                                                                    ),
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 14793,
                                                                                                                                                                                        end: 14798,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                index: Expr {
                                                                                                                                                                                    kind: Binary {
                                                                                                                                                                                        left: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "i",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 14799,
                                                                                                                                                                                                end: 14800,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                        op: Subtract,
                                                                                                                                                                                        right: Expr {
                                                                                                                                                                                            kind: Literal(
                                                                                                                                                                                                Integer(
                                                                                                                                                                                                    1,
                                                                                                                                                                                                ),
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 14803,
                                                                                                                                                                                                end: 14804,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                    },
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 0,
                                                                                                                                                                                        end: 0,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        index: Expr {
                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                "j",
                                                                                                                                                                            ),
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 14806,
                                                                                                                                                                                end: 14807,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 0,
                                                                                                                                                                        end: 0,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                            },
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 0,
                                                                                                                                                                end: 0,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                    ],
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 14761,
                                                                                                                                                    end: 14762,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            else_branch: Some(
                                                                                                                                                Expr {
                                                                                                                                                    kind: Block(
                                                                                                                                                        [
                                                                                                                                                            Expr {
                                                                                                                                                                kind: Literal(
                                                                                                                                                                    Integer(
                                                                                                                                                                        0,
                                                                                                                                                                    ),
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 14846,
                                                                                                                                                                    end: 14847,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        ],
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 14828,
                                                                                                                                                        end: 14829,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            ),
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 14752,
                                                                                                                                            end: 14754,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ),
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 14667,
                                                                                                                                end: 14669,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Unit,
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        is_mutable: true,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 14658,
                                                                                                                        end: 14661,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "gx_row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 14888,
                                                                                                                                end: 14894,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "gx",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 14900,
                                                                                                                                    end: 14902,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "gy_row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 14917,
                                                                                                                                end: 14923,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "gy",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 14929,
                                                                                                                                    end: 14931,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 14946,
                                                                                                                                end: 14947,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 14950,
                                                                                                                                        end: 14951,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 14954,
                                                                                                                                        end: 14955,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 14317,
                                                                                                            end: 14318,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 14317,
                                                                                                    end: 14318,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 14317,
                                                                                        end: 14318,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 14301,
                                                                                end: 14306,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "grad_x",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 14984,
                                                                                        end: 14990,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "gx_row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 14996,
                                                                                            end: 15002,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "grad_y",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15013,
                                                                                        end: 15019,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "gy_row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 15025,
                                                                                            end: 15031,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15042,
                                                                                        end: 15043,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15046,
                                                                                                end: 15047,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15050,
                                                                                                end: 15051,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 14197,
                                                                    end: 14198,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 14180,
                                                            end: 14185,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Identifier(
                                                                        "grad_x",
                                                                    ),
                                                                    span: Span {
                                                                        start: 15073,
                                                                        end: 15079,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Identifier(
                                                                        "grad_y",
                                                                    ),
                                                                    span: Span {
                                                                        start: 15081,
                                                                        end: 15087,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 15068,
                                                            end: 15071,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 14000,
                                                end: 14001,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 14000,
                                        end: 14001,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 14000,
                            end: 14001,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 13932,
                    end: 13935,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "normalize_image",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "image",
                                                    ),
                                                    span: Span {
                                                        start: 15220,
                                                        end: 15225,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15252,
                                                                                    end: 15258,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15261,
                                                                                    end: 15262,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 15265,
                                                                                                        end: 15270,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 15271,
                                                                                                        end: 15272,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 15263,
                                                                            end: 15264,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 15289,
                                                                                            end: 15290,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 15287,
                                                                                end: 15288,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 15249,
                                                                    end: 15251,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 15237,
                                                            end: 15240,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: If {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15306,
                                                                                    end: 15312,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15316,
                                                                                    end: 15317,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Or,
                                                                    right: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "width",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15321,
                                                                                    end: 15326,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Equal,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15330,
                                                                                    end: 15331,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            then_branch: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Return {
                                                                                value: Some(
                                                                                    Expr {
                                                                                        kind: Call {
                                                                                            func: Expr {
                                                                                                kind: QualifiedName {
                                                                                                    module: "Vec",
                                                                                                    name: "new",
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 15349,
                                                                                                    end: 15352,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            args: [],
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 0,
                                                                                            end: 0,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ),
                                                                            },
                                                                            span: Span {
                                                                                start: 15342,
                                                                                end: 15348,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 15332,
                                                                    end: 15333,
                                                                },
                                                                attributes: [],
                                                            },
                                                            else_branch: None,
                                                        },
                                                        span: Span {
                                                            start: 15303,
                                                            end: 15305,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 15407,
                                                            end: 15410,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "min_val",
                                                                ),
                                                                span: Span {
                                                                    start: 15411,
                                                                    end: 15418,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: IndexAccess {
                                                                    object: Expr {
                                                                        kind: IndexAccess {
                                                                            object: Expr {
                                                                                kind: Identifier(
                                                                                    "image",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15421,
                                                                                    end: 15426,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            index: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15427,
                                                                                    end: 15428,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    index: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 15430,
                                                                            end: 15431,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 15438,
                                                            end: 15441,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "max_val",
                                                                ),
                                                                span: Span {
                                                                    start: 15442,
                                                                    end: 15449,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: IndexAccess {
                                                                    object: Expr {
                                                                        kind: IndexAccess {
                                                                            object: Expr {
                                                                                kind: Identifier(
                                                                                    "image",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15452,
                                                                                    end: 15457,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            index: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 15458,
                                                                                    end: 15459,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    index: Expr {
                                                                        kind: Literal(
                                                                            Integer(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        span: Span {
                                                                            start: 15461,
                                                                            end: 15462,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 15474,
                                                            end: 15477,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 15478,
                                                                    end: 15479,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 15482,
                                                                    end: 15483,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 15495,
                                                                            end: 15496,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 15499,
                                                                            end: 15505,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 15516,
                                                                                end: 15519,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15520,
                                                                                        end: 15521,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15524,
                                                                                        end: 15525,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15541,
                                                                                                end: 15542,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15545,
                                                                                                end: 15550,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: If {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: IndexAccess {
                                                                                                                            object: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "image",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 15568,
                                                                                                                                    end: 15573,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                            index: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "i",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 15574,
                                                                                                                                    end: 15575,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        },
                                                                                                                        span: Span {
                                                                                                                            start: 0,
                                                                                                                            end: 0,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "j",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 15577,
                                                                                                                            end: 15578,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Less,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "min_val",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 15582,
                                                                                                                    end: 15589,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    then_branch: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "min_val",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 15608,
                                                                                                                                end: 15615,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: IndexAccess {
                                                                                                                                object: Expr {
                                                                                                                                    kind: IndexAccess {
                                                                                                                                        object: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "image",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 15618,
                                                                                                                                                end: 15623,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        index: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "i",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 15624,
                                                                                                                                                end: 15625,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                index: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 15627,
                                                                                                                                        end: 15628,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 15590,
                                                                                                            end: 15591,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    else_branch: None,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 15565,
                                                                                                    end: 15567,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: If {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: IndexAccess {
                                                                                                                            object: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "image",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 15660,
                                                                                                                                    end: 15665,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                            index: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "i",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 15666,
                                                                                                                                    end: 15667,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        },
                                                                                                                        span: Span {
                                                                                                                            start: 0,
                                                                                                                            end: 0,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "j",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 15669,
                                                                                                                            end: 15670,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Greater,
                                                                                                            right: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "max_val",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 15674,
                                                                                                                    end: 15681,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    then_branch: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "max_val",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 15700,
                                                                                                                                end: 15707,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: IndexAccess {
                                                                                                                                object: Expr {
                                                                                                                                    kind: IndexAccess {
                                                                                                                                        object: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "image",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 15710,
                                                                                                                                                end: 15715,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        index: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "i",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 15716,
                                                                                                                                                end: 15717,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                index: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 15719,
                                                                                                                                        end: 15720,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 15682,
                                                                                                            end: 15683,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    else_branch: None,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 15657,
                                                                                                    end: 15659,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "j",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 15749,
                                                                                                            end: 15750,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 15753,
                                                                                                                    end: 15754,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Add,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        1,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 15757,
                                                                                                                    end: 15758,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15551,
                                                                                        end: 15552,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 15535,
                                                                                end: 15540,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15778,
                                                                                        end: 15779,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15782,
                                                                                                end: 15783,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15786,
                                                                                                end: 15787,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 15506,
                                                                    end: 15507,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 15489,
                                                            end: 15494,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "range",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "max_val",
                                                                        ),
                                                                        span: Span {
                                                                            start: 15816,
                                                                            end: 15823,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Subtract,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "min_val",
                                                                        ),
                                                                        span: Span {
                                                                            start: 15826,
                                                                            end: 15833,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 15804,
                                                            end: 15807,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 15844,
                                                            end: 15847,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "normalized",
                                                                ),
                                                                span: Span {
                                                                    start: 15848,
                                                                    end: 15858,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 15861,
                                                                            end: 15864,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 15882,
                                                                    end: 15883,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 15886,
                                                                    end: 15887,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 15899,
                                                                            end: 15900,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Identifier(
                                                                            "height",
                                                                        ),
                                                                        span: Span {
                                                                            start: 15903,
                                                                            end: 15909,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 15920,
                                                                                end: 15923,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "row",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15924,
                                                                                        end: 15927,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Call {
                                                                                        func: Expr {
                                                                                            kind: QualifiedName {
                                                                                                module: "Vec",
                                                                                                name: "new",
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 15930,
                                                                                                end: 15933,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 15959,
                                                                                end: 15962,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15963,
                                                                                        end: 15964,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15967,
                                                                                        end: 15968,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15984,
                                                                                                end: 15985,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Identifier(
                                                                                                "width",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 15988,
                                                                                                end: 15993,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Let {
                                                                                                    name: "normalized_value",
                                                                                                    type_annotation: None,
                                                                                                    value: Expr {
                                                                                                        kind: If {
                                                                                                            condition: Expr {
                                                                                                                kind: Binary {
                                                                                                                    left: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "range",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 16034,
                                                                                                                            end: 16039,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    op: Greater,
                                                                                                                    right: Expr {
                                                                                                                        kind: Literal(
                                                                                                                            Integer(
                                                                                                                                0,
                                                                                                                            ),
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 16042,
                                                                                                                            end: 16043,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            then_branch: Expr {
                                                                                                                kind: Block(
                                                                                                                    [
                                                                                                                        Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Binary {
                                                                                                                                                left: Expr {
                                                                                                                                                    kind: IndexAccess {
                                                                                                                                                        object: Expr {
                                                                                                                                                            kind: IndexAccess {
                                                                                                                                                                object: Expr {
                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                        "image",
                                                                                                                                                                    ),
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 16064,
                                                                                                                                                                        end: 16069,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                index: Expr {
                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                        "i",
                                                                                                                                                                    ),
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 16070,
                                                                                                                                                                        end: 16071,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                            },
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 0,
                                                                                                                                                                end: 0,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                        index: Expr {
                                                                                                                                                            kind: Identifier(
                                                                                                                                                                "j",
                                                                                                                                                            ),
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 16073,
                                                                                                                                                                end: 16074,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                    },
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 0,
                                                                                                                                                        end: 0,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                                op: Subtract,
                                                                                                                                                right: Expr {
                                                                                                                                                    kind: Identifier(
                                                                                                                                                        "min_val",
                                                                                                                                                    ),
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 16078,
                                                                                                                                                        end: 16085,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            },
                                                                                                                                            span: Span {
                                                                                                                                                start: 0,
                                                                                                                                                end: 0,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: Multiply,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    255,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 16089,
                                                                                                                                                end: 16092,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Divide,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "range",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 16096,
                                                                                                                                        end: 16101,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    ],
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 16044,
                                                                                                                    end: 16045,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            else_branch: Some(
                                                                                                                Expr {
                                                                                                                    kind: Block(
                                                                                                                        [
                                                                                                                            Expr {
                                                                                                                                kind: Literal(
                                                                                                                                    Integer(
                                                                                                                                        128,
                                                                                                                                    ),
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 16139,
                                                                                                                                    end: 16142,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 16121,
                                                                                                                        end: 16122,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ),
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 16031,
                                                                                                            end: 16033,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    body: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: MethodCall {
                                                                                                                        receiver: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "row",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 16221,
                                                                                                                                end: 16224,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        method: "push",
                                                                                                                        args: [
                                                                                                                            Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "normalized_value",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 16230,
                                                                                                                                    end: 16246,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "j",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 16261,
                                                                                                                                end: 16262,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Identifier(
                                                                                                                                        "j",
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 16265,
                                                                                                                                        end: 16266,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: Add,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 16269,
                                                                                                                                        end: 16270,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 15994,
                                                                                                            end: 15995,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    is_mutable: false,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 15994,
                                                                                                    end: 15995,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 15994,
                                                                                        end: 15995,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 15978,
                                                                                end: 15983,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: MethodCall {
                                                                                receiver: Expr {
                                                                                    kind: Identifier(
                                                                                        "normalized",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 16299,
                                                                                        end: 16309,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                method: "push",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Identifier(
                                                                                            "row",
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 16315,
                                                                                            end: 16318,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 16329,
                                                                                        end: 16330,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 16333,
                                                                                                end: 16334,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 16337,
                                                                                                end: 16338,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 15910,
                                                                    end: 15911,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 15893,
                                                            end: 15898,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "normalized",
                                                        ),
                                                        span: Span {
                                                            start: 16355,
                                                            end: 16365,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 15201,
                                                end: 15202,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 15201,
                                        end: 15202,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 15201,
                            end: 15202,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 15142,
                    end: 15145,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "detect_contours",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "binary_image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "height",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: MethodCall {
                                                receiver: Expr {
                                                    kind: Identifier(
                                                        "binary_image",
                                                    ),
                                                    span: Span {
                                                        start: 16503,
                                                        end: 16515,
                                                    },
                                                    attributes: [],
                                                },
                                                method: "len",
                                                args: [],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "width",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: If {
                                                                    condition: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 16542,
                                                                                    end: 16548,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Greater,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        0,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 16551,
                                                                                    end: 16552,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    then_branch: Expr {
                                                                        kind: Block(
                                                                            [
                                                                                Expr {
                                                                                    kind: MethodCall {
                                                                                        receiver: Expr {
                                                                                            kind: IndexAccess {
                                                                                                object: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "binary_image",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 16555,
                                                                                                        end: 16567,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                index: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            0,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 16568,
                                                                                                        end: 16569,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        method: "len",
                                                                                        args: [],
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            ],
                                                                        ),
                                                                        span: Span {
                                                                            start: 16553,
                                                                            end: 16554,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    else_branch: Some(
                                                                        Expr {
                                                                            kind: Block(
                                                                                [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 16586,
                                                                                            end: 16587,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            ),
                                                                            span: Span {
                                                                                start: 16584,
                                                                                end: 16585,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ),
                                                                },
                                                                span: Span {
                                                                    start: 16539,
                                                                    end: 16541,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 16527,
                                                            end: 16530,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 16600,
                                                            end: 16603,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "contour_points",
                                                                ),
                                                                span: Span {
                                                                    start: 16604,
                                                                    end: 16618,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: QualifiedName {
                                                                            module: "Vec",
                                                                            name: "new",
                                                                        },
                                                                        span: Span {
                                                                            start: 16621,
                                                                            end: 16624,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 16694,
                                                            end: 16697,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 16698,
                                                                    end: 16699,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        1,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 16702,
                                                                    end: 16703,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 16715,
                                                                            end: 16716,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: Binary {
                                                                            left: Expr {
                                                                                kind: Identifier(
                                                                                    "height",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 16719,
                                                                                    end: 16725,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            op: Subtract,
                                                                            right: Expr {
                                                                                kind: Literal(
                                                                                    Integer(
                                                                                        1,
                                                                                    ),
                                                                                ),
                                                                                span: Span {
                                                                                    start: 16728,
                                                                                    end: 16729,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 16740,
                                                                                end: 16743,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 16744,
                                                                                        end: 16745,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            1,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 16748,
                                                                                        end: 16749,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 16765,
                                                                                                end: 16766,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: Binary {
                                                                                                left: Expr {
                                                                                                    kind: Identifier(
                                                                                                        "width",
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 16769,
                                                                                                        end: 16774,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                op: Subtract,
                                                                                                right: Expr {
                                                                                                    kind: Literal(
                                                                                                        Integer(
                                                                                                            1,
                                                                                                        ),
                                                                                                    ),
                                                                                                    span: Span {
                                                                                                        start: 16777,
                                                                                                        end: 16778,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: If {
                                                                                                    condition: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: IndexAccess {
                                                                                                                    object: Expr {
                                                                                                                        kind: IndexAccess {
                                                                                                                            object: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "binary_image",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 16796,
                                                                                                                                    end: 16808,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                            index: Expr {
                                                                                                                                kind: Identifier(
                                                                                                                                    "i",
                                                                                                                                ),
                                                                                                                                span: Span {
                                                                                                                                    start: 16809,
                                                                                                                                    end: 16810,
                                                                                                                                },
                                                                                                                                attributes: [],
                                                                                                                            },
                                                                                                                        },
                                                                                                                        span: Span {
                                                                                                                            start: 0,
                                                                                                                            end: 0,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                    index: Expr {
                                                                                                                        kind: Identifier(
                                                                                                                            "j",
                                                                                                                        ),
                                                                                                                        span: Span {
                                                                                                                            start: 16812,
                                                                                                                            end: 16813,
                                                                                                                        },
                                                                                                                        attributes: [],
                                                                                                                    },
                                                                                                                },
                                                                                                                span: Span {
                                                                                                                    start: 0,
                                                                                                                    end: 0,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Equal,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        255,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 16818,
                                                                                                                    end: 16821,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    then_branch: Expr {
                                                                                                        kind: Block(
                                                                                                            [
                                                                                                                Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "var",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 16929,
                                                                                                                        end: 16932,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "is_boundary",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 16933,
                                                                                                                                end: 16944,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Literal(
                                                                                                                                Bool(
                                                                                                                                    false,
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 16947,
                                                                                                                                end: 16952,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "var",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 16987,
                                                                                                                        end: 16990,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: Assign {
                                                                                                                        target: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "di",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 16991,
                                                                                                                                end: 16993,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        value: Expr {
                                                                                                                            kind: Unary {
                                                                                                                                op: Negate,
                                                                                                                                operand: Expr {
                                                                                                                                    kind: Literal(
                                                                                                                                        Integer(
                                                                                                                                            1,
                                                                                                                                        ),
                                                                                                                                    ),
                                                                                                                                    span: Span {
                                                                                                                                        start: 16997,
                                                                                                                                        end: 16998,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 16996,
                                                                                                                                end: 16997,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: While {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Binary {
                                                                                                                                left: Expr {
                                                                                                                                    kind: Binary {
                                                                                                                                        left: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "di",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 17022,
                                                                                                                                                end: 17024,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                        op: LessEqual,
                                                                                                                                        right: Expr {
                                                                                                                                            kind: Literal(
                                                                                                                                                Integer(
                                                                                                                                                    1,
                                                                                                                                                ),
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 17028,
                                                                                                                                                end: 17029,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 0,
                                                                                                                                        end: 0,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                                op: And,
                                                                                                                                right: Expr {
                                                                                                                                    kind: Unary {
                                                                                                                                        op: Not,
                                                                                                                                        operand: Expr {
                                                                                                                                            kind: Identifier(
                                                                                                                                                "is_boundary",
                                                                                                                                            ),
                                                                                                                                            span: Span {
                                                                                                                                                start: 17034,
                                                                                                                                                end: 17045,
                                                                                                                                            },
                                                                                                                                            attributes: [],
                                                                                                                                        },
                                                                                                                                    },
                                                                                                                                    span: Span {
                                                                                                                                        start: 17033,
                                                                                                                                        end: 17034,
                                                                                                                                    },
                                                                                                                                    attributes: [],
                                                                                                                                },
                                                                                                                            },
                                                                                                                            span: Span {
                                                                                                                                start: 0,
                                                                                                                                end: 0,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        body: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: Identifier(
                                                                                                                                            "var",
                                                                                                                                        ),
                                                                                                                                        span: Span {
                                                                                                                                            start: 17068,
                                                                                                                                            end: 17071,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "dj",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 17072,
                                                                                                                                                    end: 17074,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Unary {
                                                                                                                                                    op: Negate,
                                                                                                                                                    operand: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 17078,
                                                                                                                                                            end: 17079,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 17077,
                                                                                                                                                    end: 17078,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    Expr {
                                                                                                                                        kind: While {
                                                                                                                                            condition: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Binary {
                                                                                                                                                            left: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "dj",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 17107,
                                                                                                                                                                    end: 17109,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            op: LessEqual,
                                                                                                                                                            right: Expr {
                                                                                                                                                                kind: Literal(
                                                                                                                                                                    Integer(
                                                                                                                                                                        1,
                                                                                                                                                                    ),
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 17113,
                                                                                                                                                                    end: 17114,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 0,
                                                                                                                                                            end: 0,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: And,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Unary {
                                                                                                                                                            op: Not,
                                                                                                                                                            operand: Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "is_boundary",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 17119,
                                                                                                                                                                    end: 17130,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        },
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 17118,
                                                                                                                                                            end: 17119,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            body: Expr {
                                                                                                                                                kind: Block(
                                                                                                                                                    [
                                                                                                                                                        Expr {
                                                                                                                                                            kind: If {
                                                                                                                                                                condition: Expr {
                                                                                                                                                                    kind: Binary {
                                                                                                                                                                        left: Expr {
                                                                                                                                                                            kind: IndexAccess {
                                                                                                                                                                                object: Expr {
                                                                                                                                                                                    kind: IndexAccess {
                                                                                                                                                                                        object: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "binary_image",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 17160,
                                                                                                                                                                                                end: 17172,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                        index: Expr {
                                                                                                                                                                                            kind: Binary {
                                                                                                                                                                                                left: Expr {
                                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                                        "i",
                                                                                                                                                                                                    ),
                                                                                                                                                                                                    span: Span {
                                                                                                                                                                                                        start: 17173,
                                                                                                                                                                                                        end: 17174,
                                                                                                                                                                                                    },
                                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                                },
                                                                                                                                                                                                op: Add,
                                                                                                                                                                                                right: Expr {
                                                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                                                        "di",
                                                                                                                                                                                                    ),
                                                                                                                                                                                                    span: Span {
                                                                                                                                                                                                        start: 17177,
                                                                                                                                                                                                        end: 17179,
                                                                                                                                                                                                    },
                                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                                },
                                                                                                                                                                                            },
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 0,
                                                                                                                                                                                                end: 0,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                    },
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 0,
                                                                                                                                                                                        end: 0,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                                index: Expr {
                                                                                                                                                                                    kind: Binary {
                                                                                                                                                                                        left: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "j",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 17181,
                                                                                                                                                                                                end: 17182,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                        op: Add,
                                                                                                                                                                                        right: Expr {
                                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                                "dj",
                                                                                                                                                                                            ),
                                                                                                                                                                                            span: Span {
                                                                                                                                                                                                start: 17185,
                                                                                                                                                                                                end: 17187,
                                                                                                                                                                                            },
                                                                                                                                                                                            attributes: [],
                                                                                                                                                                                        },
                                                                                                                                                                                    },
                                                                                                                                                                                    span: Span {
                                                                                                                                                                                        start: 0,
                                                                                                                                                                                        end: 0,
                                                                                                                                                                                    },
                                                                                                                                                                                    attributes: [],
                                                                                                                                                                                },
                                                                                                                                                                            },
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 0,
                                                                                                                                                                                end: 0,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        op: Equal,
                                                                                                                                                                        right: Expr {
                                                                                                                                                                            kind: Literal(
                                                                                                                                                                                Integer(
                                                                                                                                                                                    0,
                                                                                                                                                                                ),
                                                                                                                                                                            ),
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 17192,
                                                                                                                                                                                end: 17193,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 0,
                                                                                                                                                                        end: 0,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                then_branch: Expr {
                                                                                                                                                                    kind: Block(
                                                                                                                                                                        [
                                                                                                                                                                            Expr {
                                                                                                                                                                                kind: Assign {
                                                                                                                                                                                    target: Expr {
                                                                                                                                                                                        kind: Identifier(
                                                                                                                                                                                            "is_boundary",
                                                                                                                                                                                        ),
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 17224,
                                                                                                                                                                                            end: 17235,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                    value: Expr {
                                                                                                                                                                                        kind: Literal(
                                                                                                                                                                                            Bool(
                                                                                                                                                                                                true,
                                                                                                                                                                                            ),
                                                                                                                                                                                        ),
                                                                                                                                                                                        span: Span {
                                                                                                                                                                                            start: 17238,
                                                                                                                                                                                            end: 17242,
                                                                                                                                                                                        },
                                                                                                                                                                                        attributes: [],
                                                                                                                                                                                    },
                                                                                                                                                                                },
                                                                                                                                                                                span: Span {
                                                                                                                                                                                    start: 0,
                                                                                                                                                                                    end: 0,
                                                                                                                                                                                },
                                                                                                                                                                                attributes: [],
                                                                                                                                                                            },
                                                                                                                                                                        ],
                                                                                                                                                                    ),
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 17194,
                                                                                                                                                                        end: 17195,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                else_branch: None,
                                                                                                                                                            },
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 17157,
                                                                                                                                                                end: 17159,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                        Expr {
                                                                                                                                                            kind: Assign {
                                                                                                                                                                target: Expr {
                                                                                                                                                                    kind: Identifier(
                                                                                                                                                                        "dj",
                                                                                                                                                                    ),
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 17294,
                                                                                                                                                                        end: 17296,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                                value: Expr {
                                                                                                                                                                    kind: Binary {
                                                                                                                                                                        left: Expr {
                                                                                                                                                                            kind: Identifier(
                                                                                                                                                                                "dj",
                                                                                                                                                                            ),
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 17299,
                                                                                                                                                                                end: 17301,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                        op: Add,
                                                                                                                                                                        right: Expr {
                                                                                                                                                                            kind: Literal(
                                                                                                                                                                                Integer(
                                                                                                                                                                                    1,
                                                                                                                                                                                ),
                                                                                                                                                                            ),
                                                                                                                                                                            span: Span {
                                                                                                                                                                                start: 17304,
                                                                                                                                                                                end: 17305,
                                                                                                                                                                            },
                                                                                                                                                                            attributes: [],
                                                                                                                                                                        },
                                                                                                                                                                    },
                                                                                                                                                                    span: Span {
                                                                                                                                                                        start: 0,
                                                                                                                                                                        end: 0,
                                                                                                                                                                    },
                                                                                                                                                                    attributes: [],
                                                                                                                                                                },
                                                                                                                                                            },
                                                                                                                                                            span: Span {
                                                                                                                                                                start: 0,
                                                                                                                                                                end: 0,
                                                                                                                                                            },
                                                                                                                                                            attributes: [],
                                                                                                                                                        },
                                                                                                                                                    ],
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 17131,
                                                                                                                                                    end: 17132,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 17101,
                                                                                                                                            end: 17106,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                    Expr {
                                                                                                                                        kind: Assign {
                                                                                                                                            target: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "di",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 17349,
                                                                                                                                                    end: 17351,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            value: Expr {
                                                                                                                                                kind: Binary {
                                                                                                                                                    left: Expr {
                                                                                                                                                        kind: Identifier(
                                                                                                                                                            "di",
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 17354,
                                                                                                                                                            end: 17356,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                    op: Add,
                                                                                                                                                    right: Expr {
                                                                                                                                                        kind: Literal(
                                                                                                                                                            Integer(
                                                                                                                                                                1,
                                                                                                                                                            ),
                                                                                                                                                        ),
                                                                                                                                                        span: Span {
                                                                                                                                                            start: 17359,
                                                                                                                                                            end: 17360,
                                                                                                                                                        },
                                                                                                                                                        attributes: [],
                                                                                                                                                    },
                                                                                                                                                },
                                                                                                                                                span: Span {
                                                                                                                                                    start: 0,
                                                                                                                                                    end: 0,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 17046,
                                                                                                                                end: 17047,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 17016,
                                                                                                                        end: 17021,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                Expr {
                                                                                                                    kind: If {
                                                                                                                        condition: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "is_boundary",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 17416,
                                                                                                                                end: 17427,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        then_branch: Expr {
                                                                                                                            kind: Block(
                                                                                                                                [
                                                                                                                                    Expr {
                                                                                                                                        kind: MethodCall {
                                                                                                                                            receiver: Expr {
                                                                                                                                                kind: Identifier(
                                                                                                                                                    "contour_points",
                                                                                                                                                ),
                                                                                                                                                span: Span {
                                                                                                                                                    start: 17450,
                                                                                                                                                    end: 17464,
                                                                                                                                                },
                                                                                                                                                attributes: [],
                                                                                                                                            },
                                                                                                                                            method: "push",
                                                                                                                                            args: [
                                                                                                                                                Expr {
                                                                                                                                                    kind: Macro {
                                                                                                                                                        name: "vec",
                                                                                                                                                        args: [
                                                                                                                                                            Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "i",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 17475,
                                                                                                                                                                    end: 17476,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                            Expr {
                                                                                                                                                                kind: Identifier(
                                                                                                                                                                    "j",
                                                                                                                                                                ),
                                                                                                                                                                span: Span {
                                                                                                                                                                    start: 17478,
                                                                                                                                                                    end: 17479,
                                                                                                                                                                },
                                                                                                                                                                attributes: [],
                                                                                                                                                            },
                                                                                                                                                        ],
                                                                                                                                                    },
                                                                                                                                                    span: Span {
                                                                                                                                                        start: 17470,
                                                                                                                                                        end: 17473,
                                                                                                                                                    },
                                                                                                                                                    attributes: [],
                                                                                                                                                },
                                                                                                                                            ],
                                                                                                                                        },
                                                                                                                                        span: Span {
                                                                                                                                            start: 0,
                                                                                                                                            end: 0,
                                                                                                                                        },
                                                                                                                                        attributes: [],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 17428,
                                                                                                                                end: 17429,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        else_branch: None,
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 17413,
                                                                                                                        end: 17415,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            ],
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 16822,
                                                                                                            end: 16823,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    else_branch: None,
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 16793,
                                                                                                    end: 16795,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "j",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 17527,
                                                                                                            end: 17528,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 17531,
                                                                                                                    end: 17532,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Add,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        1,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 17535,
                                                                                                                    end: 17536,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 16779,
                                                                                        end: 16780,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 16759,
                                                                                end: 16764,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 17556,
                                                                                        end: 17557,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 17560,
                                                                                                end: 17561,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 17564,
                                                                                                end: 17565,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 16730,
                                                                    end: 16731,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 16709,
                                                            end: 16714,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "contour_points",
                                                        ),
                                                        span: Span {
                                                            start: 17582,
                                                            end: 17596,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 16484,
                                                end: 16485,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 16484,
                                        end: 16485,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 16484,
                            end: 16485,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 16418,
                    end: 16421,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "cv_pipeline_full",
                    type_params: [],
                    params: [
                        Param {
                            pattern: Identifier(
                                "image",
                            ),
                            ty: Type {
                                kind: Generic {
                                    base: "Vec",
                                    params: [
                                        Type {
                                            kind: Generic {
                                                base: "Vec",
                                                params: [
                                                    Type {
                                                        kind: Named(
                                                            "i32",
                                                        ),
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                        },
                                    ],
                                },
                                span: Span {
                                    start: 0,
                                    end: 0,
                                },
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                            is_mutable: false,
                            default_value: None,
                        },
                    ],
                    return_type: Some(
                        Type {
                            kind: Generic {
                                base: "Vec",
                                params: [
                                    Type {
                                        kind: Generic {
                                            base: "Vec",
                                            params: [
                                                Type {
                                                    kind: Named(
                                                        "i32",
                                                    ),
                                                    span: Span {
                                                        start: 0,
                                                        end: 0,
                                                    },
                                                },
                                            ],
                                        },
                                        span: Span {
                                            start: 0,
                                            end: 0,
                                        },
                                    },
                                ],
                            },
                            span: Span {
                                start: 0,
                                end: 0,
                            },
                        },
                    ),
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Let {
                                        name: "blurred",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: Call {
                                                func: Expr {
                                                    kind: Identifier(
                                                        "gaussian_blur",
                                                    ),
                                                    span: Span {
                                                        start: 17766,
                                                        end: 17779,
                                                    },
                                                    attributes: [],
                                                },
                                                args: [
                                                    Expr {
                                                        kind: Identifier(
                                                            "image",
                                                        ),
                                                        span: Span {
                                                            start: 17780,
                                                            end: 17785,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Literal(
                                                            Integer(
                                                                1,
                                                            ),
                                                        ),
                                                        span: Span {
                                                            start: 17787,
                                                            end: 17788,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 0,
                                                end: 0,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "edges",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "sobel_edge_detection",
                                                                        ),
                                                                        span: Span {
                                                                            start: 17842,
                                                                            end: 17862,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "blurred",
                                                                            ),
                                                                            span: Span {
                                                                                start: 17863,
                                                                                end: 17870,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 17830,
                                                            end: 17833,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "binary",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "threshold_image",
                                                                        ),
                                                                        span: Span {
                                                                            start: 17946,
                                                                            end: 17961,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "edges",
                                                                            ),
                                                                            span: Span {
                                                                                start: 17962,
                                                                                end: 17967,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Literal(
                                                                                Integer(
                                                                                    50,
                                                                                ),
                                                                            ),
                                                                            span: Span {
                                                                                start: 17969,
                                                                                end: 17971,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 17933,
                                                            end: 17936,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Macro {
                                                                    name: "vec",
                                                                    args: [
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18067,
                                                                                            end: 18068,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18070,
                                                                                            end: 18071,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18073,
                                                                                            end: 18074,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 18062,
                                                                                end: 18065,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18090,
                                                                                            end: 18091,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18093,
                                                                                            end: 18094,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18096,
                                                                                            end: 18097,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 18085,
                                                                                end: 18088,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18113,
                                                                                            end: 18114,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18116,
                                                                                            end: 18117,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                1,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18119,
                                                                                            end: 18120,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 18108,
                                                                                end: 18111,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 18048,
                                                                    end: 18051,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 18035,
                                                            end: 18038,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "cleaned",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "morphological_erosion",
                                                                        ),
                                                                        span: Span {
                                                                            start: 18152,
                                                                            end: 18173,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "binary",
                                                                            ),
                                                                            span: Span {
                                                                                start: 18174,
                                                                                end: 18180,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "kernel",
                                                                            ),
                                                                            span: Span {
                                                                                start: 18182,
                                                                                end: 18188,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 18138,
                                                            end: 18141,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "cleaned",
                                                        ),
                                                        span: Span {
                                                            start: 18236,
                                                            end: 18243,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 17697,
                                                end: 17698,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 17697,
                                        end: 17698,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 17697,
                            end: 17698,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 17637,
                    end: 17640,
                },
                attributes: [],
            },
            Expr {
                kind: Function {
                    name: "main",
                    type_params: [],
                    params: [],
                    return_type: None,
                    body: Expr {
                        kind: Block(
                            [
                                Expr {
                                    kind: Macro {
                                        name: "println",
                                        args: [
                                            Expr {
                                                kind: Literal(
                                                    String(
                                                        "Computer Vision Pipeline Library",
                                                    ),
                                                ),
                                                span: Span {
                                                    start: 18313,
                                                    end: 18347,
                                                },
                                                attributes: [],
                                            },
                                        ],
                                    },
                                    span: Span {
                                        start: 18304,
                                        end: 18311,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Macro {
                                        name: "println",
                                        args: [
                                            Expr {
                                                kind: Literal(
                                                    String(
                                                        "================================",
                                                    ),
                                                ),
                                                span: Span {
                                                    start: 18363,
                                                    end: 18397,
                                                },
                                                attributes: [],
                                            },
                                        ],
                                    },
                                    span: Span {
                                        start: 18354,
                                        end: 18361,
                                    },
                                    attributes: [],
                                },
                                Expr {
                                    kind: Let {
                                        name: "sample_image",
                                        type_annotation: None,
                                        value: Expr {
                                            kind: Macro {
                                                name: "vec",
                                                args: [
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            10,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18468,
                                                                        end: 18470,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            20,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18472,
                                                                        end: 18474,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            30,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18476,
                                                                        end: 18478,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 18463,
                                                            end: 18466,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            40,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18494,
                                                                        end: 18496,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            50,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18498,
                                                                        end: 18500,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            60,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18502,
                                                                        end: 18504,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 18489,
                                                            end: 18492,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "vec",
                                                            args: [
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            70,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18520,
                                                                        end: 18522,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            80,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18524,
                                                                        end: 18526,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                                Expr {
                                                                    kind: Literal(
                                                                        Integer(
                                                                            90,
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18528,
                                                                        end: 18530,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 18515,
                                                            end: 18518,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            },
                                            span: Span {
                                                start: 18449,
                                                end: 18452,
                                            },
                                            attributes: [],
                                        },
                                        body: Expr {
                                            kind: Block(
                                                [
                                                    Expr {
                                                        kind: Let {
                                                            name: "kernel",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Macro {
                                                                    name: "vec",
                                                                    args: [
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18580,
                                                                                            end: 18581,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 18584,
                                                                                                    end: 18585,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 18583,
                                                                                            end: 18584,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18587,
                                                                                            end: 18588,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 18575,
                                                                                end: 18578,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 18605,
                                                                                                    end: 18606,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 18604,
                                                                                            end: 18605,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                5,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18608,
                                                                                            end: 18609,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 18612,
                                                                                                    end: 18613,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 18611,
                                                                                            end: 18612,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 18599,
                                                                                end: 18602,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Macro {
                                                                                name: "vec",
                                                                                args: [
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18629,
                                                                                            end: 18630,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Unary {
                                                                                            op: Negate,
                                                                                            operand: Expr {
                                                                                                kind: Literal(
                                                                                                    Integer(
                                                                                                        1,
                                                                                                    ),
                                                                                                ),
                                                                                                span: Span {
                                                                                                    start: 18633,
                                                                                                    end: 18634,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        },
                                                                                        span: Span {
                                                                                            start: 18632,
                                                                                            end: 18633,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                    Expr {
                                                                                        kind: Literal(
                                                                                            Integer(
                                                                                                0,
                                                                                            ),
                                                                                        ),
                                                                                        span: Span {
                                                                                            start: 18636,
                                                                                            end: 18637,
                                                                                        },
                                                                                        attributes: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                            span: Span {
                                                                                start: 18624,
                                                                                end: 18627,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 18561,
                                                                    end: 18564,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 18548,
                                                            end: 18551,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Let {
                                                            name: "result",
                                                            type_annotation: None,
                                                            value: Expr {
                                                                kind: Call {
                                                                    func: Expr {
                                                                        kind: Identifier(
                                                                            "convolution_2d",
                                                                        ),
                                                                        span: Span {
                                                                            start: 18668,
                                                                            end: 18682,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    args: [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "sample_image",
                                                                            ),
                                                                            span: Span {
                                                                                start: 18683,
                                                                                end: 18695,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "kernel",
                                                                            ),
                                                                            span: Span {
                                                                                start: 18697,
                                                                                end: 18703,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Literal(
                                                                    Unit,
                                                                ),
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            is_mutable: true,
                                                        },
                                                        span: Span {
                                                            start: 18655,
                                                            end: 18658,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Macro {
                                                            name: "println",
                                                            args: [
                                                                Expr {
                                                                    kind: Literal(
                                                                        String(
                                                                            "Sample convolution result:",
                                                                        ),
                                                                    ),
                                                                    span: Span {
                                                                        start: 18724,
                                                                        end: 18752,
                                                                    },
                                                                    attributes: [],
                                                                },
                                                            ],
                                                        },
                                                        span: Span {
                                                            start: 18715,
                                                            end: 18722,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Identifier(
                                                            "var",
                                                        ),
                                                        span: Span {
                                                            start: 18759,
                                                            end: 18762,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: Assign {
                                                            target: Expr {
                                                                kind: Identifier(
                                                                    "i",
                                                                ),
                                                                span: Span {
                                                                    start: 18763,
                                                                    end: 18764,
                                                                },
                                                                attributes: [],
                                                            },
                                                            value: Expr {
                                                                kind: Literal(
                                                                    Integer(
                                                                        0,
                                                                    ),
                                                                ),
                                                                span: Span {
                                                                    start: 18767,
                                                                    end: 18768,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 0,
                                                            end: 0,
                                                        },
                                                        attributes: [],
                                                    },
                                                    Expr {
                                                        kind: While {
                                                            condition: Expr {
                                                                kind: Binary {
                                                                    left: Expr {
                                                                        kind: Identifier(
                                                                            "i",
                                                                        ),
                                                                        span: Span {
                                                                            start: 18780,
                                                                            end: 18781,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                    op: Less,
                                                                    right: Expr {
                                                                        kind: MethodCall {
                                                                            receiver: Expr {
                                                                                kind: Identifier(
                                                                                    "result",
                                                                                ),
                                                                                span: Span {
                                                                                    start: 18784,
                                                                                    end: 18790,
                                                                                },
                                                                                attributes: [],
                                                                            },
                                                                            method: "len",
                                                                            args: [],
                                                                        },
                                                                        span: Span {
                                                                            start: 0,
                                                                            end: 0,
                                                                        },
                                                                        attributes: [],
                                                                    },
                                                                },
                                                                span: Span {
                                                                    start: 0,
                                                                    end: 0,
                                                                },
                                                                attributes: [],
                                                            },
                                                            body: Expr {
                                                                kind: Block(
                                                                    [
                                                                        Expr {
                                                                            kind: Identifier(
                                                                                "var",
                                                                            ),
                                                                            span: Span {
                                                                                start: 18807,
                                                                                end: 18810,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 18811,
                                                                                        end: 18812,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 18815,
                                                                                        end: 18816,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: While {
                                                                                condition: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "j",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 18832,
                                                                                                end: 18833,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Less,
                                                                                        right: Expr {
                                                                                            kind: MethodCall {
                                                                                                receiver: Expr {
                                                                                                    kind: IndexAccess {
                                                                                                        object: Expr {
                                                                                                            kind: Identifier(
                                                                                                                "result",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 18836,
                                                                                                                end: 18842,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                        index: Expr {
                                                                                                            kind: Identifier(
                                                                                                                "i",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 18843,
                                                                                                                end: 18844,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                    },
                                                                                                    span: Span {
                                                                                                        start: 0,
                                                                                                        end: 0,
                                                                                                    },
                                                                                                    attributes: [],
                                                                                                },
                                                                                                method: "len",
                                                                                                args: [],
                                                                                            },
                                                                                            span: Span {
                                                                                                start: 0,
                                                                                                end: 0,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                body: Expr {
                                                                                    kind: Block(
                                                                                        [
                                                                                            Expr {
                                                                                                kind: Macro {
                                                                                                    name: "println",
                                                                                                    args: [
                                                                                                        Expr {
                                                                                                            kind: StringInterpolation {
                                                                                                                parts: [
                                                                                                                    Text(
                                                                                                                        "Result[",
                                                                                                                    ),
                                                                                                                    Text(
                                                                                                                        "{}",
                                                                                                                    ),
                                                                                                                    Text(
                                                                                                                        "][",
                                                                                                                    ),
                                                                                                                    Text(
                                                                                                                        "{}",
                                                                                                                    ),
                                                                                                                    Text(
                                                                                                                        "]: ",
                                                                                                                    ),
                                                                                                                    Text(
                                                                                                                        "{}",
                                                                                                                    ),
                                                                                                                ],
                                                                                                            },
                                                                                                            span: Span {
                                                                                                                start: 18875,
                                                                                                                end: 18895,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                        Expr {
                                                                                                            kind: Identifier(
                                                                                                                "i",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 18897,
                                                                                                                end: 18898,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                        Expr {
                                                                                                            kind: Identifier(
                                                                                                                "j",
                                                                                                            ),
                                                                                                            span: Span {
                                                                                                                start: 18900,
                                                                                                                end: 18901,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                        Expr {
                                                                                                            kind: IndexAccess {
                                                                                                                object: Expr {
                                                                                                                    kind: IndexAccess {
                                                                                                                        object: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "result",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 18903,
                                                                                                                                end: 18909,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                        index: Expr {
                                                                                                                            kind: Identifier(
                                                                                                                                "i",
                                                                                                                            ),
                                                                                                                            span: Span {
                                                                                                                                start: 18910,
                                                                                                                                end: 18911,
                                                                                                                            },
                                                                                                                            attributes: [],
                                                                                                                        },
                                                                                                                    },
                                                                                                                    span: Span {
                                                                                                                        start: 0,
                                                                                                                        end: 0,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                                index: Expr {
                                                                                                                    kind: Identifier(
                                                                                                                        "j",
                                                                                                                    ),
                                                                                                                    span: Span {
                                                                                                                        start: 18913,
                                                                                                                        end: 18914,
                                                                                                                    },
                                                                                                                    attributes: [],
                                                                                                                },
                                                                                                            },
                                                                                                            span: Span {
                                                                                                                start: 0,
                                                                                                                end: 0,
                                                                                                            },
                                                                                                            attributes: [],
                                                                                                        },
                                                                                                    ],
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 18866,
                                                                                                    end: 18873,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                            Expr {
                                                                                                kind: Assign {
                                                                                                    target: Expr {
                                                                                                        kind: Identifier(
                                                                                                            "j",
                                                                                                        ),
                                                                                                        span: Span {
                                                                                                            start: 18930,
                                                                                                            end: 18931,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                    value: Expr {
                                                                                                        kind: Binary {
                                                                                                            left: Expr {
                                                                                                                kind: Identifier(
                                                                                                                    "j",
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 18934,
                                                                                                                    end: 18935,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                            op: Add,
                                                                                                            right: Expr {
                                                                                                                kind: Literal(
                                                                                                                    Integer(
                                                                                                                        1,
                                                                                                                    ),
                                                                                                                ),
                                                                                                                span: Span {
                                                                                                                    start: 18938,
                                                                                                                    end: 18939,
                                                                                                                },
                                                                                                                attributes: [],
                                                                                                            },
                                                                                                        },
                                                                                                        span: Span {
                                                                                                            start: 0,
                                                                                                            end: 0,
                                                                                                        },
                                                                                                        attributes: [],
                                                                                                    },
                                                                                                },
                                                                                                span: Span {
                                                                                                    start: 0,
                                                                                                    end: 0,
                                                                                                },
                                                                                                attributes: [],
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 18852,
                                                                                        end: 18853,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 18826,
                                                                                end: 18831,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                        Expr {
                                                                            kind: Assign {
                                                                                target: Expr {
                                                                                    kind: Identifier(
                                                                                        "i",
                                                                                    ),
                                                                                    span: Span {
                                                                                        start: 18959,
                                                                                        end: 18960,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                                value: Expr {
                                                                                    kind: Binary {
                                                                                        left: Expr {
                                                                                            kind: Identifier(
                                                                                                "i",
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 18963,
                                                                                                end: 18964,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                        op: Add,
                                                                                        right: Expr {
                                                                                            kind: Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                            span: Span {
                                                                                                start: 18967,
                                                                                                end: 18968,
                                                                                            },
                                                                                            attributes: [],
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 0,
                                                                                        end: 0,
                                                                                    },
                                                                                    attributes: [],
                                                                                },
                                                                            },
                                                                            span: Span {
                                                                                start: 0,
                                                                                end: 0,
                                                                            },
                                                                            attributes: [],
                                                                        },
                                                                    ],
                                                                ),
                                                                span: Span {
                                                                    start: 18797,
                                                                    end: 18798,
                                                                },
                                                                attributes: [],
                                                            },
                                                        },
                                                        span: Span {
                                                            start: 18774,
                                                            end: 18779,
                                                        },
                                                        attributes: [],
                                                    },
                                                ],
                                            ),
                                            span: Span {
                                                start: 18298,
                                                end: 18299,
                                            },
                                            attributes: [],
                                        },
                                        is_mutable: false,
                                    },
                                    span: Span {
                                        start: 18298,
                                        end: 18299,
                                    },
                                    attributes: [],
                                },
                            ],
                        ),
                        span: Span {
                            start: 18298,
                            end: 18299,
                        },
                        attributes: [],
                    },
                    is_async: false,
                    is_pub: false,
                },
                span: Span {
                    start: 18287,
                    end: 18290,
                },
                attributes: [],
            },
        ],
    ),
    span: Span {
        start: 0,
        end: 0,
    },
    attributes: [],
}
